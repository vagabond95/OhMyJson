# OhMyJson - Technical Specification v4.0

## 1. ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ì •ë³´
- **ì•± ì´ë¦„**: OhMyJson
- **í”Œë«í¼**: macOS
- **ê¸°ìˆ  ìŠ¤íƒ**: Swift 5.9+ / SwiftUI
- **ë°°í¬ ë°©ì‹**: ì§ì ‘ ë°°í¬ (DMG) + Homebrew Cask (`brew tap vagabond95/ohmyjson`)
- **ìë™ ì—…ë°ì´íŠ¸**: Sparkle 2 (EdDSA ì„œëª…, sandboxed XPC)
- **ìµœì†Œ ì§€ì› ë²„ì „**: macOS 14.0+ (Sonoma)
- **ì €ì¥ì†Œ**: https://github.com/vagabond95/OhMyJson

### 1.2 í•µì‹¬ ëª©ì 
í´ë¦½ë³´ë“œì— ë³µì‚¬ëœ JSON í…ìŠ¤íŠ¸ë¥¼ ê¸€ë¡œë²Œ í•«í‚¤ë¡œ ì¦‰ì‹œ í˜¸ì¶œí•˜ì—¬, Input Viewì—ì„œ í¸ì§‘ ê°€ëŠ¥í•˜ê³  ì‹¤ì‹œê°„ìœ¼ë¡œ í¬ë§¤íŒ…ëœ Beautify/Tree ë·°ì–´ë¡œ í‘œì‹œí•˜ëŠ” ë©”ë‰´ë°” ìƒì£¼ ì• í”Œë¦¬ì¼€ì´ì…˜

### 1.3 ì£¼ìš” ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤
- REST API ì‘ë‹µ ë””ë²„ê¹…
- ê°œë°œ ì¤‘ JSON ë°ì´í„° êµ¬ì¡° í™•ì¸
- minifyëœ JSONì˜ ê°€ë…ì„± í–¥ìƒ
- JSON ì§ì ‘ ì…ë ¥ ë° ì‹¤ì‹œê°„ ê²€ì¦

---

## 2. ì•± ìƒëª…ì£¼ê¸°

### 2.1 ì•± íƒ€ì…
- **ë©”ë‰´ë°” ìƒì£¼ ì•±** (Menu Bar App)
- Dock ì•„ì´ì½˜ ì—†ìŒ (`LSUIElement = true`)
- ë·°ì–´ ì°½ì´ ì—´ë¦¬ë©´ Dockì— í‘œì‹œ (`NSApp.setActivationPolicy(.regular)`)
- ë·°ì–´ ì°½ì´ ë‹«íˆë©´ Dockì—ì„œ ìˆ¨ê¹€ (`NSApp.setActivationPolicy(.accessory)`)
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ í•­ìƒ ì‹¤í–‰ë˜ë©° ê¸€ë¡œë²Œ í•«í‚¤ ê°ì§€

### 2.2 ìë™ ì‹œì‘
- `SMAppService` í™œìš©
- ì½”ë“œì— êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‚˜, í˜„ì¬ ì„¤ì • UIì—ì„œ ë…¸ì¶œí•˜ì§€ ì•ŠìŒ

### 2.3 ë©”ë‰´ë°” ë©”ë‰´ êµ¬ì„±
```
[ì•± ì•„ì´ì½˜ (curlybraces SF Symbol) í´ë¦­ ì‹œ]
â”œâ”€â”€ Open             â†’ (ë·°ì–´ ì°½ ì—´ê¸° + í´ë¦½ë³´ë“œ íŒŒì‹±)
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”œâ”€â”€ Settings...  âŒ˜,  â†’ (NSPanel ì„¤ì • ì°½)
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â””â”€â”€ Quit OhMyJson âŒ˜Q â†’ (ì•± ì¢…ë£Œ)
```

### 2.4 ë©”ì¸ ë©”ë‰´ ë°” (ì•± ë©”ë‰´)
```
OhMyJson       File                    Edit
â”œâ”€â”€ About      â”œâ”€â”€ New Tab    âŒ˜N       â”œâ”€â”€ Undo    âŒ˜Z
â”œâ”€â”€ â”€â”€â”€â”€       â”œâ”€â”€ Close Tab  âŒ˜W       â”œâ”€â”€ Redo    â‡§âŒ˜Z
â”œâ”€â”€ Settings âŒ˜,â”œâ”€â”€ â”€â”€â”€â”€                â”œâ”€â”€ â”€â”€â”€â”€
â”œâ”€â”€ â”€â”€â”€â”€       â”œâ”€â”€ Previous Tab â‡§âŒ˜[    â”œâ”€â”€ Cut     âŒ˜X
â””â”€â”€ Quit    âŒ˜Q â””â”€â”€ Next Tab    â‡§âŒ˜]    â”œâ”€â”€ Copy    âŒ˜C
                                        â”œâ”€â”€ Paste   âŒ˜V
                                        â””â”€â”€ Select All âŒ˜A
```

### 2.5 ì˜¨ë³´ë”© (ìµœì´ˆ ì‹¤í–‰ ë° ì—…ë°ì´íŠ¸ í›„)
- `hasSeenOnboarding` í”Œë˜ê·¸ë¡œ ì˜¨ë³´ë”© í‘œì‹œ ì—¬ë¶€ íŒë³„
- ì•± ì—…ë°ì´íŠ¸ ì‹œ UserDefaults ì „ì²´ ë¦¬ì…‹(ì„¹ì…˜ 9.5)ìœ¼ë¡œ `hasSeenOnboarding`ë„ ì´ˆê¸°í™” â†’ ì—…ë°ì´íŠ¸ í›„ ì²« ì‹¤í–‰ ì‹œ ì˜¨ë³´ë”© ì¬ë…¸ì¶œ
- ì˜¨ë³´ë”© ì¤‘ í•«í‚¤ ë¹„í™œì„±í™” (`HotKeyManager.isEnabled = false`)
- **ì ‘ê·¼ì„± ê¶Œí•œ ìš”ì²­**: ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ + System Settings ì•ˆë‚´
- **í•«í‚¤ ì„¤ì •**: ì‚¬ìš©ì í•«í‚¤ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- **Step 1 â€” JSON ë³µì‚¬**: ìƒ˜í”Œ JSON ë¯¸ë¦¬ë³´ê¸° + "Copy JSON" ë²„íŠ¼. í´ë¦­ ì‹œ í´ë¦½ë³´ë“œì— ë³µì‚¬ í›„ Step 2ë¡œ ì „í™˜
- **Step 2 â€” í•«í‚¤ ê°€ì´ë“œ**: ê°œë³„ í‚¤ìº¡ + "+" êµ¬ë¶„ì í˜•íƒœë¡œ í•«í‚¤ í‘œì‹œ
  - `KeyElement` / `HotKeyCombo.keyElements`: í•«í‚¤ë¥¼ ê°œë³„ í‚¤ ìš”ì†Œë¡œ ë¶„í•´ (ì»¤ìŠ¤í…€ í•«í‚¤ ìë™ ëŒ€ì‘)
  - `KeyPressTracker` (`@Observable`): NSEvent ëª¨ë‹ˆí„° 3ê°œ (`flagsChanged`, `keyDown`, `keyUp`)ë¡œ ì‹¤ì‹œê°„ í‚¤ ì…ë ¥ ê°ì§€
  - **ìˆœì°¨ ê°€ì´ë“œ**: ì•„ì§ ì•ˆ ëˆŒë¦° ê°€ì¥ ì• í‚¤ì— pulsing glow í•˜ì´ë¼ì´íŠ¸
  - **Press í”¼ë“œë°±**: í‚¤ ëˆ„ë¦„ ì‹œ `scaleEffect(0.93)` + ë°°ê²½ ë°ì•„ì§ + í…Œë‘ë¦¬ ê°•í™”
  - **ì™„ë£Œ ê°ì§€**: ëª¨ë“  í‚¤ ë™ì‹œ ì…ë ¥ â†’ 0.5ì´ˆ ë”œë ˆì´ â†’ `onGetStarted()` í˜¸ì¶œ
  - CGEvent tap (AppDelegate) ê²½ë¡œë„ ë³‘í–‰ â€” `dismissWithFade()`ì˜ `guard let window`ë¡œ ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€
- ì˜¨ë³´ë”© ì™„ë£Œ ì‹œ:
  - ìƒ˜í”Œ JSONìœ¼ë¡œ ìƒˆ íƒ­ ìƒì„±
  - Confetti ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ (ConfettiSwiftUI)
  - í•«í‚¤ ì¬í™œì„±í™”

---

## 3. í•«í‚¤ ì‹œìŠ¤í…œ

### 3.1 ê¸€ë¡œë²Œ í•«í‚¤ (Open)
- **ê¸°ë³¸ê°’**: `Control + Option + J`
- ì„¤ì •ì—ì„œ ì»¤ìŠ¤í…€ í•«í‚¤ ì§€ì • ê°€ëŠ¥
- `CGEvent` tap (`.listenOnly` ëª¨ë“œ) í™œìš© â€” ì´ë²¤íŠ¸ë¥¼ ì†Œë¹„í•˜ì§€ ì•ŠìŒ
- **Accessibility ê¶Œí•œ í•„ìˆ˜**: ê¶Œí•œ ì—†ìœ¼ë©´ ì´ë²¤íŠ¸ íƒ­ ìƒì„± ì‹¤íŒ¨
- **ìŠ¤ë¡œí‹€ë§**: 500ms ê°„ê²©ìœ¼ë¡œ ì¤‘ë³µ íŠ¸ë¦¬ê±° ë°©ì§€
- `tapDisabledByTimeout` ìë™ ì¬í™œì„±í™” ì²˜ë¦¬

### 3.2 Open í•«í‚¤ ë™ì‘
1. í•«í‚¤ ì…ë ¥ ê°ì§€
2. í´ë¦½ë³´ë“œì—ì„œ í…ìŠ¤íŠ¸ ì½ê¸°
3. í…ìŠ¤íŠ¸ ì–‘ë ê³µë°± trim
4. **ë¹ˆ í´ë¦½ë³´ë“œ** â†’ ë¹ˆ ìƒíƒœë¡œ ìƒˆ íƒ­ ìƒì„± + ì°½ ì—´ê¸°
5. **5MB ì´ˆê³¼** â†’ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ ("Continue" / "Cancel")
6. JSON íŒŒì‹± ì‹œë„
7. **ì„±ê³µ** â†’ ìƒˆ íƒ­ ìƒì„± + ì°½ ì—´ê¸° (ì´ë¯¸ ì—´ë ¤ìˆìœ¼ë©´ ìµœì „ë©´ìœ¼ë¡œ)
8. **ì‹¤íŒ¨** â†’ Toastë§Œ í‘œì‹œ ("Invalid JSON in clipboard", 2ì´ˆ), ìƒˆ íƒ­ ìƒì„±í•˜ì§€ ì•ŠìŒ. ì°½ì´ ì—´ë ¤ìˆìœ¼ë©´ ìµœì „ë©´ìœ¼ë¡œ

### 3.3 ì ‘ê·¼ì„± ê¶Œí•œ ëª¨ë‹ˆí„°ë§
- `AccessibilityManager`ê°€ 0.3ì´ˆ ê°„ê²©ìœ¼ë¡œ `AXIsProcessTrusted()` í´ë§
- ê¶Œí•œ íšë“ ì‹œ â†’ í•«í‚¤ ë§¤ë‹ˆì € ìë™ ì‹œì‘
- ê¶Œí•œ í•´ì œ ì‹œ â†’ í•«í‚¤ ë§¤ë‹ˆì € ìë™ ì¤‘ì§€
- ê¶Œí•œ ë¯¸ë¶€ì—¬ ì‹œ ë·°ì–´ ì°½ì— ê²½ê³  ë°°ë„ˆ í‘œì‹œ (`AccessibilityWarningBanner`)

---

## 4. ì°½ ë ˆì´ì•„ì›ƒ

### 4.1 ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ”´ğŸŸ¡ğŸŸ¢] [ğŸŒ™] â”‚ [Tab1] [Tab2] [Tab3] â”‚ [+]              [ğŸ” Search] â”‚ â† íƒ­ë°” + í”Œë¡œíŒ… ê²€ìƒ‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Json Input     [ğŸ—‘ï¸]  â”‚   â”‚ [Beautify | Tree]               [ğŸ“‹]     â”‚ â† ì˜ì—­ë³„ íˆ´ë°”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â”‚   â”‚                                           â”‚
â”‚   Input View          â”‚   â”‚   Beautify View ë˜ëŠ” Tree View            â”‚
â”‚   (NSTextView)        â”‚   â”‚                                           â”‚
â”‚                       â”‚   â”‚                                           â”‚
â”‚   "Paste or type..."  â”‚   â”‚   [ë¹ˆ ìƒíƒœ: PlaceholderView]              â”‚
â”‚                       â”‚   â”‚                                           â”‚
â”‚                       â”‚   â”‚                                     [âŒ¨ï¸]  â”‚ â† ì¹˜íŠ¸ì‹œíŠ¸ ë²„íŠ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        35% (ê¸°ë³¸)      9px         65% (ê¸°ë³¸)
                    draggable
                    divider
```

### 4.2 ë ˆì´ì•„ì›ƒ íŠ¹ì„±
- **ê¸°ë³¸ ë¹„ìœ¨**: Input View 35% : Viewer 65%
- **ë“œë˜ê·¸ ê°€ëŠ¥í•œ Divider**ë¡œ ë¹„ìœ¨ ì¡°ì ˆ ê°€ëŠ¥
- Divider ìœ„ì¹˜ëŠ” **UserDefaultsì— ì˜êµ¬ ì €ì¥**, ì•± ì¬ì‹œì‘ ì‹œ ë³µì›
- Divider ìœ„ì¹˜ëŠ” **ëª¨ë“  íƒ­ì— ê³µí†µ** ì ìš© (íƒ­ë³„ ë…ë¦½ ì•„ë‹˜)
- **ì°½ ìµœì†Œ í¬ê¸°**: 800 x 400
- **ì´ˆê¸° í¬ê¸°**: 1400 x 900 (ìœ„ì¹˜ëŠ” `setFrameAutosaveName`ìœ¼ë¡œ ìë™ ì €ì¥/ë³µì›)

### 4.3 Resizable Divider

#### 4.3.1 ê¸°ë³¸ ë™ì‘
- **ê¸°ë³¸ ë¹„ìœ¨**: Input 35% : Viewer 65%
- **ìµœì†Œ ë„ˆë¹„**: ê° íŒ¨ë„ 200px (ì´ ì´í•˜ë¡œ ì¶•ì†Œ ë¶ˆê°€)
- **ë“œë˜ê·¸**: ì¢Œìš°ë¡œ ë“œë˜ê·¸í•˜ì—¬ ë¹„ìœ¨ ì‹¤ì‹œê°„ ì¡°ì ˆ (ìµœì†Œ ì´ë™ëŸ‰ 2px)
- **ë”ë¸”í´ë¦­**: ê¸°ë³¸ ë¹„ìœ¨(35:65)ë¡œ ì¦‰ì‹œ ë¦¬ì…‹ (ì• ë‹ˆë©”ì´ì…˜ ì—†ìŒ)

#### 4.3.2 ì‹œê°ì  ìŠ¤íƒ€ì¼
- **ê¸°ë³¸ ìƒíƒœ**: 9px íˆ¬ëª… ì˜ì—­ ì•ˆì— 1px `theme.border` ìƒ‰ìƒ ì¤‘ì•™ì„ 
- **ìƒë‹¨ í—¤ë” ì˜ì—­**: 36px ë†’ì´ì˜ `theme.secondaryBackground` ìƒ‰ìƒ ë°°ê²½ + 1px border
- **ì»¤ì„œ**: `resizeLeftRight` (â†”ï¸) ì»¤ì„œ (`NSView.resetCursorRects` í™œìš©)

#### 4.3.3 ë“œë˜ê·¸ ì¤‘ ë™ì‘
- **ì‹¤ì‹œê°„ ë¦¬ì‚¬ì´ì¦ˆ**: ë“œë˜ê·¸ ì¤‘ ì–‘ìª½ íŒ¨ë„ ì»¨í…ì¸  ì¦‰ì‹œ ë°˜ì˜
- **íŒ¨ë„ ìƒí˜¸ì‘ìš© ì°¨ë‹¨**: `allowsHitTesting(!isDraggingDivider)`ë¡œ ì–‘ìª½ íŒ¨ë„ ë¹„í™œì„±í™”
- **ì»¤ì„œ ê³ ì •**: ë“œë˜ê·¸ ì‹œì‘ ì‹œ `NSCursor.resizeLeftRight.push()`, ì¢…ë£Œ ì‹œ `NSCursor.pop()`
- **ë¯¸ì„¸ ë–¨ë¦¼ ë°©ì§€**: `abs(newRatio - dividerRatio) * effectiveWidth > 0.5` í•„í„°

#### 4.3.4 ìƒíƒœ ì €ì¥
- **ì €ì¥ ìœ„ì¹˜**: UserDefaults (`dividerRatio` í‚¤)
- **ì €ì¥ ê°’**: Input panelì˜ ë¹„ìœ¨ (0.0~1.0, ê¸°ë³¸ê°’ 0.35)
- **ì €ì¥ ì‹œì **: ë“œë˜ê·¸ ì¢…ë£Œ ì‹œ / ë”ë¸”í´ë¦­ ë¦¬ì…‹ ì‹œ

### 4.4 ì˜ì—­ë³„ íˆ´ë°”
- **Input ì˜ì—­**: ì¢Œì¸¡ì— "Json Input" ë¼ë²¨ (headline ìŠ¤íƒ€ì¼), ìš°ì¸¡ì— ğŸ—‘ï¸ ì•„ì´ì½˜ Clear ë²„íŠ¼ (tooltip: "Clear")
- **Viewer ì˜ì—­**: ì¢Œì¸¡ì— ë·° ëª¨ë“œ ì„¸ê·¸ë¨¼íŠ¸ ì»¨íŠ¸ë¡¤ (Beautify | Tree), ìš°ì¸¡ì— ğŸ“‹ Copy All ì•„ì´ì½˜ ë²„íŠ¼ (ìœ íš¨í•œ JSONì¼ ë•Œë§Œ í‘œì‹œ, tooltip: "Copy All")

### 4.5 ì°½ ë‹«ê¸° ë™ì‘

| íŠ¸ë¦¬ê±° | íƒ­ 2ê°œ ì´ìƒ | íƒ­ 1ê°œ |
|--------|------------|--------|
| **Cmd+W** | í˜„ì¬ íƒ­ ë‹«ê¸° (ëª¨ë‹¬ ì—†ìŒ) | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ |
| **Tab X ë²„íŠ¼** | í•´ë‹¹ íƒ­ ë‹«ê¸° (ëª¨ë‹¬ ì—†ìŒ) | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ |
| **Traffic light (ë¹¨ê°„ ë‹«ê¸°)** | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ |
| **Cmd+Q** | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ | "Quit OhMyJson?" â†’ ì•± ì¢…ë£Œ |

- **Settings íŒ¨ë„ì´ key windowì¼ ë•Œ Cmd+W**: Settings ì°½ ë‹«ê¸° (íƒ­ ì˜í–¥ ì—†ìŒ)
- **"Quit OhMyJson?" ëª¨ë‹¬**: "Quit" ë²„íŠ¼ â†’ `NSApp.terminate`, "Cancel" ë²„íŠ¼ â†’ ì·¨ì†Œ
- **êµ¬í˜„**: `OhMyJsonWindow.performClose(_:)` ì˜¤ë²„ë¼ì´ë“œì—ì„œ `NSApp.currentEvent?.type`ìœ¼ë¡œ í‚¤ë³´ë“œ(Cmd+W) vs ë§ˆìš°ìŠ¤(traffic light) êµ¬ë¶„

### 4.6 íŠ¸ë˜í”½ ë¼ì´íŠ¸ ìœ„ì¹˜ ì¡°ì •
- íƒ­ ë°” ë†’ì´(40pt)ì— ë§ì¶° ë²„íŠ¼ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬
- ì¢Œì¸¡ìœ¼ë¡œ 8pt ì¶”ê°€ ì´ë™
- `windowDidResize` ì‹œ ì¬ê³„ì‚°

---

## 5. Input View

### 5.1 ê¸°ë³¸ íŠ¹ì„±
- `EditableTextView` (NSTextView ì„œë¸Œí´ë˜ìŠ¤) + `UndoableTextView` (NSViewRepresentable) ë˜í¼
- ì¼ë°˜ í…ìŠ¤íŠ¸ ì—ë””í„° (syntax highlighting ì—†ìŒ)
- ììœ ë¡­ê²Œ ìˆ˜ì • ê°€ëŠ¥ (Undo/Redo ì§€ì›)
- `isRichText = false`, ìë™ êµì •/ëŒ€ì‹œ ì¹˜í™˜/ìŠ¤í ë§ ê²€ì‚¬ ë¹„í™œì„±í™”
- ìˆ˜í‰/ìˆ˜ì§ ìŠ¤í¬ë¡¤ ì§€ì› (`widthTracksTextView = false` â†’ ê°€ë¡œ ì¤„ë°”ê¿ˆ ì—†ìŒ)

### 5.2 Placeholder
- ë¹ˆ ìƒíƒœì¼ ë•Œ: `"Paste or type JSON here..."` í‘œì‹œ

### 5.3 ìë™ íŒŒì‹±
- **ë””ë°”ìš´ìŠ¤ ì‹œê°„**: 0.3ì´ˆ
- ì…ë ¥ í›„ 0.3ì´ˆ ë™ì•ˆ ì¶”ê°€ ì…ë ¥ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ JSON íŒŒì‹± ì‹œë„
- ë¹ˆ í…ìŠ¤íŠ¸ (ê³µë°±ë§Œ í¬í•¨) â†’ ì¦‰ì‹œ ì´ˆê¸°í™” (ë””ë°”ìš´ìŠ¤ ì—†ì´)
- ë¡œë”© í‘œì‹œ ì—†ìŒ

### 5.4 íŠ¹ìˆ˜ í‚¤ ë™ì‘
- **Space / Return / Enter(numpad)**: Inputì´ ë¹„ì–´ìˆê±°ë‚˜ ì»¤ì„œê°€ í…ìŠ¤íŠ¸ ëì— ìˆìœ¼ë©´ ë¬´ì‹œ (trailing ì…ë ¥ ì°¨ë‹¨)
- **ê¸€ë¡œë²Œ í•«í‚¤ ì¡°í•©**: Input Viewì—ì„œ ë¬¸ì ì‚½ì… ì°¨ë‹¨ (í‚¤ ì´ë²¤íŠ¸ ë¬´ì‹œ)

### 5.5 ê¸°ë³¸ í…ìŠ¤íŠ¸ í¸ì§‘ ë™ì‘
- `Cmd + V`: í´ë¦½ë³´ë“œ ë¶™ì—¬ë„£ê¸° (EditableTextViewì—ì„œ ì§ì ‘ ì²˜ë¦¬)
- `Cmd + C`: ì„ íƒ ì˜ì—­ ë³µì‚¬
- `Cmd + X`: ì„ íƒ ì˜ì—­ ì˜ë¼ë‚´ê¸°
- `Cmd + A`: ì „ì²´ ì„ íƒ
- `Cmd + Z`: ì‹¤í–‰ ì·¨ì†Œ
- `Cmd + Shift + Z`: ë‹¤ì‹œ ì‹¤í–‰ (Redo)
- NSHostingViewê°€ í‚¤ ì´ë²¤íŠ¸ë¥¼ ê°€ë¡œì±„ëŠ” ë¬¸ì œë¥¼ `performKeyEquivalent` ì˜¤ë²„ë¼ì´ë“œë¡œ í•´ê²°

### 5.6 Clear ë²„íŠ¼
- Input View íˆ´ë°” ìš°ì¸¡ì— ìœ„ì¹˜ (ğŸ—‘ï¸ trash ì•„ì´ì½˜)
- í´ë¦­ ì‹œ Input View ë° Viewer ì´ˆê¸°í™” (ê²€ìƒ‰ ìƒíƒœë„ í¬í•¨)

### 5.7 íƒ­ ì „í™˜ ì‹œ ë™ì‘
- ì´ì „ íƒ­ì˜ ìƒíƒœ ì €ì¥ (ì…ë ¥ í…ìŠ¤íŠ¸, ê²€ìƒ‰, ìŠ¤í¬ë¡¤ ìœ„ì¹˜, ë·° ëª¨ë“œ)
- ìƒˆ íƒ­ì˜ ìƒíƒœ ë³µì› (200ms ë””ë°”ìš´ìŠ¤ë¡œ ë¹ ë¥¸ ì „í™˜ ì‹œ ìµœì¢… íƒ­ë§Œ ë³µì›)
- ë³µì› ì¤‘ ì»¤ì„œëŠ” í…ìŠ¤íŠ¸ ì‹œì‘ ìœ„ì¹˜ë¡œ ì´ë™

---

## 6. Viewer

### 6.1 ë·° ëª¨ë“œ
ë‘ ê°€ì§€ ëª¨ë“œë¥¼ **ì„¸ê·¸ë¨¼íŠ¸ ì»¨íŠ¸ë¡¤** (Beautify | Tree)ë¡œ ì „í™˜:
- `Cmd + 1`: Beautify ëª¨ë“œ
- `Cmd + 2`: Tree ëª¨ë“œ
- ê¸°ë³¸ ëª¨ë“œ: **Beautify**
- ë·° ëª¨ë“œëŠ” **íƒ­ë³„ ë…ë¦½** ì €ì¥

### 6.2 ë°ì´í„° í”Œë¡œìš°
**ëª¨ë“  ë°ì´í„°ëŠ” Input View â†’ Viewer ìˆœì„œë¡œ íë¦„**
- í´ë¦½ë³´ë“œ â†’ Input View â†’ ìë™ íŒŒì‹± â†’ Viewer
- ì§ì ‘ ì…ë ¥ â†’ Input View â†’ ìë™ íŒŒì‹± â†’ Viewer
- í¬ë§¤íŒ…ëœ JSONì€ `ViewerViewModel`ì— ìºì‹œ (`formattedJSON`)

### 6.3 ë¹ˆ ìƒíƒœ
- Input Viewê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ JSONì¼ ë•Œ â†’ `PlaceholderView` í‘œì‹œ

### 6.4 ì—ëŸ¬ í‘œì‹œ
- íŒŒì‹± ì‹¤íŒ¨ ì‹œ Viewerì— `ErrorView` í‘œì‹œ
  - ì—ëŸ¬ ë©”ì‹œì§€, ë¼ì¸/ì»¬ëŸ¼ ì •ë³´
  - ì›ë³¸ í…ìŠ¤íŠ¸ í”„ë¦¬ë·° (ìµœëŒ€ 5ì¤„)

### 6.5 Beautify View
- í¬ë§¤íŒ…ëœ JSONì„ `SelectableTextView` (NSTextView ê¸°ë°˜)ë¡œ í‘œì‹œ
- **ë¼ì¸ ë„˜ë²„** í‘œì‹œ (ì¢Œì¸¡ ë³„ë„ ì˜ì—­)
- **Syntax highlighting**: NSAttributedStringìœ¼ë¡œ êµ¬í˜„
  - key, string, number, boolean, null íƒ€ì…ë³„ ìƒ‰ìƒ
- **ê²€ìƒ‰ í•˜ì´ë¼ì´íŠ¸**: í˜„ì¬ ë§¤ì¹˜(ì£¼í™© ë°°ê²½) / ê¸°íƒ€ ë§¤ì¹˜(ë…¸ë€/ê°ˆìƒ‰ ë°°ê²½) êµ¬ë¶„
- **ìŠ¤í¬ë¡¤ ìœ„ì¹˜**: íƒ­ë³„ ë…ë¦½ ì €ì¥/ë³µì›
- **5MB ì´ìƒ JSON**: Beautify ëª¨ë“œ ì „í™˜ ì‹œ ê²½ê³  ("View Anyway" / "Switch to Tree")

### 6.6 Tree View
- `TreeView` + `TreeNodeView`ë¡œ êµ¬ì„±

#### êµ¬ì¡° í‘œì‹œ
- ë“¤ì—¬ì“°ê¸°ë¡œ depth í‘œí˜„ (ê³µë°± 2ì¹¸ Ã— depth)
- **ì»¨í…Œì´ë„ˆ ë…¸ë“œ**: í¼ì¹¨/ì ‘í˜ í™”ì‚´í‘œ (`â–¼` / `â–¶`) í‘œì‹œ
  - Object: `{ N }` í˜•ì‹ (N = í‚¤ ê°œìˆ˜)
  - Array: `[ N ]` í˜•ì‹ (N = ìš”ì†Œ ê°œìˆ˜)
- **ë¦¬í”„ ë…¸ë“œ**: í‚¤: ê°’ í˜•íƒœë¡œ í‘œì‹œ

#### ê¸°ë³¸ í¼ì¹¨ ìƒíƒœ
- **depth < 2** ê¹Œì§€ë§Œ ê¸°ë³¸ í¼ì¹¨ (`defaultFoldDepth: 2`)
- depth 2 ì´ìƒì€ ì ‘íŒ ìƒíƒœë¡œ ì‹œì‘

#### Fold/Unfold ë™ì‘
- **ì»¨í…Œì´ë„ˆ ë…¸ë“œ ì‹±ê¸€í´ë¦­**: fold/unfold í† ê¸€
- **ë¦¬í”„ ë…¸ë“œ ì‹±ê¸€í´ë¦­**: ì„ íƒ
- **ë¦¬í”„ ë…¸ë“œ ë”ë¸”í´ë¦­**: ê°’ ë³µì‚¬

#### ê²€ìƒ‰ í•˜ì´ë¼ì´íŠ¸
- ë§¤ì¹­ í…ìŠ¤íŠ¸ì— ë°°ê²½ìƒ‰ + ì „ê²½ìƒ‰ ì ìš© + ë³¼ë“œ
- í˜„ì¬ ë§¤ì¹˜: `searchCurrentMatchBg` / `searchCurrentMatchFg`
- ê¸°íƒ€ ë§¤ì¹˜: `searchOtherMatchBg` / `searchOtherMatchFg`
- Hover ì‹œ í–‰ ë°°ê²½ìƒ‰ ë³€ê²½ (`hoverBg`)

### 6.7 ê°’ íƒ€ì…ë³„ ìƒ‰ìƒ (Syntax Highlighting)

**Dark Mode:**
| íƒ€ì… | ìƒ‰ìƒ ì½”ë“œ | ë¹„ê³  |
|------|----------|------|
| key | #E8B4B4 | ì—°ë¶„í™ |
| string | #A8CC8C | ì—°ì´ˆë¡ |
| number | #DBAB79 | ì—°ì£¼í™© |
| boolean | #66C2CD | ì‹œì•ˆ |
| null | #808080 | íšŒìƒ‰ |
| structure | #D4D4D4 | ì—°íšŒìƒ‰ |

**Light Mode:**
| íƒ€ì… | ìƒ‰ìƒ ì½”ë“œ | ë¹„ê³  |
|------|----------|------|
| key | #0451A5 | íŒŒë‘ |
| string | #A31515 | ë¹¨ê°• |
| number | #098658 | ì´ˆë¡ |
| boolean | #0000FF | íŒŒë‘ |
| null | #808080 | íšŒìƒ‰ |
| structure | #383838 | ì§„íšŒìƒ‰ |

### 6.8 ë“¤ì—¬ì“°ê¸°
- **ì‚¬ìš©ì ì„¤ì • ê°€ëŠ¥**: 2 spaces ë˜ëŠ” 4 spaces
- **ê¸°ë³¸ê°’**: 4 spaces
- ì„¤ì • ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜ (`AppSettings.jsonIndentChanged` PassthroughSubject)

---

## 7. ê²€ìƒ‰ ê¸°ëŠ¥

### 7.1 ê²€ìƒ‰ UI
- **í”Œë¡œíŒ… ê²€ìƒ‰ ë°”**: ì°½ ìš°ì¸¡ ìƒë‹¨ì— ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ
- `Cmd + F`ë¡œ ì—´ê¸° (ì—´ë¦° ìƒíƒœì—ì„œ ì¬ì…ë ¥ ì‹œ ë¬´ì‹œ)
- `Esc`ë¡œ ë‹«ê¸° (ê²€ìƒ‰ í…ìŠ¤íŠ¸ ì´ˆê¸°í™” í¬í•¨)
- ì—´ê¸°/ë‹«ê¸° ì‹œ `easeInOut` ì• ë‹ˆë©”ì´ì…˜ (0.15ì´ˆ)

### 7.2 ê²€ìƒ‰ ë²”ìœ„
- **Beautify ëª¨ë“œ**: í¬ë§¤íŒ…ëœ JSON í…ìŠ¤íŠ¸ ì „ì²´ì—ì„œ ë‹¨ìˆœ ë¬¸ìì—´ ê²€ìƒ‰
- **Tree ëª¨ë“œ**: keyì™€ value ëª¨ë‘ì—ì„œ ë‹¨ìˆœ í…ìŠ¤íŠ¸ ê²€ìƒ‰
- ëŒ€ì†Œë¬¸ì ë¬´ì‹œ (case-insensitive)

### 7.3 ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
- **ê²°ê³¼ ì¹´ìš´í„°**: `"1/15"` í˜•ì‹ (í˜„ì¬ ì¸ë±ìŠ¤/ì „ì²´ ê°œìˆ˜)
- **ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼**: â–² â–¼ (ì´ì „/ë‹¤ìŒ)
- **í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜**: `Enter` (ë‹¤ìŒ), `â†‘` / `â†“` (ì´ì „/ë‹¤ìŒ)
- í•´ë‹¹ ìœ„ì¹˜ë¡œ ìë™ ìŠ¤í¬ë¡¤
- Tree ëª¨ë“œì—ì„œ í•„ìš” ì‹œ ë¶€ëª¨ ë…¸ë“œ ìë™ í¼ì¹¨

### 7.4 ê²€ìƒ‰ ìƒíƒœ ë³´ì¡´
- ê²€ìƒ‰ í…ìŠ¤íŠ¸, ì¸ë±ìŠ¤, ê²€ìƒ‰ ë°” í‘œì‹œ ì—¬ë¶€ëŠ” **íƒ­ë³„ ë…ë¦½** ì €ì¥
- ë·° ëª¨ë“œë³„ ë…ë¦½ ê²€ìƒ‰ ì¸ë±ìŠ¤ (beautifySearchIndex / treeSearchIndex)

---

## 8. ë³µì‚¬ ê¸°ëŠ¥

### 8.1 ë¶€ë¶„ ë³µì‚¬ (Tree View)
- **ë¦¬í”„ ë…¸ë“œ ë”ë¸”í´ë¦­** ì‹œ í´ë¦½ë³´ë“œ ë³µì‚¬
- **ë³µì‚¬ í˜•ì‹**: `"key: value"` (í‚¤ê°€ ìˆëŠ” ê²½ìš°) ë˜ëŠ” ê°’ë§Œ (ë£¨íŠ¸ ë…¸ë“œ)
- **Toast ì•Œë¦¼**: "Key-value copied to clipboard" (í† ìŠ¤íŠ¸ í‘œì‹œ)

### 8.2 ì „ì²´ ë³µì‚¬
- Viewer íˆ´ë°”ì˜ ğŸ“‹ ì•„ì´ì½˜ ë²„íŠ¼ (tooltip: "Copy All")
- ìœ íš¨í•œ JSONì¼ ë•Œë§Œ ë²„íŠ¼ í‘œì‹œ
- í˜„ì¬ indent ì„¤ì •ì— ë§ì¶° í¬ë§¤íŒ…ëœ ì „ì²´ JSON ë³µì‚¬
- **Toast ì•Œë¦¼**: "Copied to clipboard"

---

## 9. ì„¤ì •

### 9.1 ì„¤ì • UI
- **NSPanel ìœˆë„ìš°** í˜•íƒœ (ë³„ë„ ì°½)
- `Cmd + ,`ìœ¼ë¡œ ì—´ê¸°
- ë©”ë‰´ë°” ë©”ë‰´ì—ì„œë„ ì—´ê¸° ê°€ëŠ¥

### 9.2 ì„¤ì • í•­ëª©

| ì„¹ì…˜ | ì„¤ì • | íƒ€ì… | ê¸°ë³¸ê°’ |
|------|------|------|--------|
| **About** | ì•± ì´ë¦„ + ë²„ì „ | í‘œì‹œ ì „ìš© | â€” |
| | GitHub ë§í¬ | ë§í¬ ë²„íŠ¼ | â€” |
| **Hotkey** | Open í•«í‚¤ | Keyboard Shortcut | `âŒƒâŒ¥J` |
| **JSON Indent** | ë“¤ì—¬ì“°ê¸° í¬ê¸° | ì„¸ê·¸ë¨¼íŠ¸ (2 / 4) | 4 |

### 9.3 í•«í‚¤ ì„¤ì • UI
- í´ë¦­í•˜ë©´ ë…¹ìŒ ëª¨ë“œ ("Press keys...") ì „í™˜
- ëª¨ë””íŒŒì´ì–´ í‚¤ í•„ìˆ˜ (command/shift/option/control ì¤‘ ìµœì†Œ 1ê°œ)
- `Esc`ë¡œ ë…¹ìŒ ì·¨ì†Œ
- ìˆ¨ê²¨ì§„ `HotKeyRecorderNSView` (NSView)ê°€ ì‹¤ì œ í‚¤ ì´ë²¤íŠ¸ ìˆ˜ì‹ 

### 9.4 í…Œë§ˆ
- **Dark / Light í† ê¸€** (íƒ­ ë°”ì˜ ğŸŒ™/â˜€ï¸ ì•„ì´ì½˜ ë²„íŠ¼)
- System í…Œë§ˆ ì—°ë™ ì—†ìŒ â€” ìˆ˜ë™ ì „í™˜ë§Œ ì§€ì›
- **ê¸°ë³¸ê°’**: Dark

### 9.5 ë²„ì „ ê¸°ë°˜ ì„¤ì • ì´ˆê¸°í™”
- ì•± ë²„ì „ ë³€ê²½ ê°ì§€ ì‹œ (`CFBundleShortVersionString`) UserDefaults ì „ì²´ ë¦¬ì…‹
- DMG ì—…ë°ì´íŠ¸ ì‹œ stale ì„¤ì • ë¬¸ì œ ë°©ì§€

---

## 10. íƒ­ ì‹œìŠ¤í…œ

### 10.1 íƒ­ ê´€ë¦¬
- **ìµœëŒ€ íƒ­ ìˆ˜**: 10ê°œ
- **LRU ìë™ ë‹«ê¸°**: 10ê°œ ì´ˆê³¼ ì‹œ ê°€ì¥ ì˜¤ë˜ëœ íƒ­ ìë™ ë‹«ê¸° + Toast ì•Œë¦¼
- **ê²½ê³ **: 8ê°œ ì´ìƒ ì‹œ "Too many tabs open" Toast í‘œì‹œ
- **íƒ­ íƒ€ì´í‹€**: ìƒì„± ì‹œê° ê¸°ë°˜ (`"MM/dd, HH:mm:ss"` í˜•ì‹)

### 10.2 íƒ­ë³„ ìƒíƒœ ë³´ì¡´
ê° íƒ­ì€ ë‹¤ìŒ ìƒíƒœë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë³´ì¡´:
- `inputText`: ì…ë ¥ í…ìŠ¤íŠ¸
- `parseResult`: íŒŒì‹± ê²°ê³¼
- `searchText`, `beautifySearchIndex`, `treeSearchIndex`: ê²€ìƒ‰ ìƒíƒœ
- `viewMode`: ë·° ëª¨ë“œ (Beautify / Tree)
- `isSearchVisible`: ê²€ìƒ‰ ë°” í‘œì‹œ ì—¬ë¶€
- `inputScrollPosition`, `beautifyScrollPosition`: ìŠ¤í¬ë¡¤ ìœ„ì¹˜
- `treeSelectedNodeId`: Tree ë·° ì„ íƒ ë…¸ë“œ

### 10.3 íƒ­ ì „í™˜ ë™ì‘
- ì´ì „ íƒ­ ìƒíƒœ ì €ì¥ â†’ ìƒˆ íƒ­ ìƒíƒœ ë³µì›
- **ë””ë°”ìš´ìŠ¤**: 200ms (ë¹ ë¥¸ ì—°ì† ì „í™˜ ì‹œ ìµœì¢… íƒ­ë§Œ ë³µì›)
- ë³µì› ì¤‘ `isRestoringTabState` í”Œë˜ê·¸ë¡œ ë¶ˆí•„ìš”í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ ì°¨ë‹¨

### 10.4 ë§ˆì§€ë§‰ íƒ­ ë‹«ê¸°
- ë§ˆì§€ë§‰ íƒ­ì„ ë‹«ìœ¼ë©´ â†’ "Quit OhMyJson?" í™•ì¸ ëª¨ë‹¬ í‘œì‹œ â†’ Quit ì‹œ ì•± ì¢…ë£Œ (`NSApp.terminate`)

---

## 11. í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

### 11.1 ê¸€ë¡œë²Œ ë‹¨ì¶•í‚¤
| ë‹¨ì¶•í‚¤ | ë™ì‘ |
|--------|------|
| ì‚¬ìš©ì ì •ì˜ (ê¸°ë³¸: âŒƒâŒ¥J) | í´ë¦½ë³´ë“œ JSON íŒŒì‹± + ìƒˆ íƒ­ ìƒì„± |

### 11.2 ì•± ë‚´ ë‹¨ì¶•í‚¤
| ë‹¨ì¶•í‚¤ | ë™ì‘ |
|--------|------|
| `âŒ˜N` | ìƒˆ íƒ­ |
| `âŒ˜W` | íƒ­ ë‹«ê¸° (íƒ­ 2+: í˜„ì¬ íƒ­ ë‹«ê¸°, íƒ­ 1ê°œ: "Quit OhMyJson?" í™•ì¸ í›„ ì¢…ë£Œ). Settingsê°€ key windowë©´ Settings ë‹«ê¸° |
| `â‡§âŒ˜[` | ì´ì „ íƒ­ |
| `â‡§âŒ˜]` | ë‹¤ìŒ íƒ­ |
| `âŒ˜1` | Beautify ëª¨ë“œ |
| `âŒ˜2` | Tree ëª¨ë“œ |
| `âŒ˜F` | ê²€ìƒ‰ ë°” ì—´ê¸° |
| `Esc` | ê²€ìƒ‰ ë°” ë˜ëŠ” ì¹˜íŠ¸ì‹œíŠ¸ ë‹«ê¸° |
| `Enter` | ë‹¤ìŒ ê²€ìƒ‰ ê²°ê³¼ |
| `â†‘` / `â†“` | ì´ì „/ë‹¤ìŒ ê²€ìƒ‰ ê²°ê³¼ |
| `âŒ˜,` | ì„¤ì • |
| `âŒ˜Q` | "Quit OhMyJson?" í™•ì¸ í›„ ì•± ì¢…ë£Œ |
| `âŒ˜Z` | ì‹¤í–‰ ì·¨ì†Œ |
| `â‡§âŒ˜Z` | ë‹¤ì‹œ ì‹¤í–‰ |
| `âŒ˜C` / `âŒ˜V` / `âŒ˜X` | ë³µì‚¬ / ë¶™ì—¬ë„£ê¸° / ì˜ë¼ë‚´ê¸° |
| `âŒ˜A` | ì „ì²´ ì„ íƒ |

---

## 12. JSON íŒŒì‹±

### 12.1 íŒŒì‹± ì •ì±…
- `JSONSerialization` ì‚¬ìš© (`.fragmentsAllowed` ì˜µì…˜)
- ìµœìƒìœ„ ë ˆë²¨ì—ì„œ object/array ë¿ ì•„ë‹ˆë¼ ë‹¨ì¼ ê°’(ë¬¸ìì—´, ìˆ«ì ë“±)ë„ í—ˆìš©
- trailing comma, ì£¼ì„ ë“± ë¹„í‘œì¤€ ë¬¸ë²• ë¶ˆí—ˆ
- JSONL ë¯¸ì§€ì›

### 12.2 Unicode ìƒˆë‹ˆíƒ€ì´ì§•
íŒŒì‹± ì „ ì•„ë˜ ë¬¸ìë¥¼ ìë™ ë³€í™˜:
- **ìŠ¤ë§ˆíŠ¸ ë”°ì˜´í‘œ** â†’ ì§ì„  ë”°ì˜´í‘œ (`"` `"` `â€` `â€Ÿ` â†’ `"`)
- **íŠ¹ìˆ˜ ê³µë°±** â†’ ì¼ë°˜ ê³µë°± (NBSP, figure space, narrow NBSP)
- **ì œë¡œ ë„ˆë¹„ ë¬¸ì** ì œê±° (BOM, ZWSP, ZWNJ, ZWJ, LRM, RLM)
- **ìœ ë‹ˆì½”ë“œ ì¤„ êµ¬ë¶„ì** â†’ `\n` (line separator, paragraph separator)

### 12.3 ì—ëŸ¬ ì •ë³´
- íŒŒì‹± ì‹¤íŒ¨ ìœ„ì¹˜ (line, column) â€” NSError ë©”ì‹œì§€ì—ì„œ ì¶”ì¶œ
- character offsetë§Œ ìˆëŠ” ê²½ìš° line/columnìœ¼ë¡œ ë³€í™˜
- ì—ëŸ¬ ìœ í˜• ë° ì„¤ëª… (ì •ë¦¬ëœ ë©”ì‹œì§€)

### 12.4 í¬ë§¤íŒ…
- **ë“¤ì—¬ì“°ê¸°**: ì„¤ì •ì— ë”°ë¼ 2 ë˜ëŠ” 4 spaces (ê¸°ë³¸ 4)
- **ì •ë ¬**: `sortedKeys` ì˜µì…˜ìœ¼ë¡œ í‚¤ ì•ŒíŒŒë²³ìˆœ ì •ë ¬
- **ë¹ˆ ì»¨í…Œì´ë„ˆ ì¶•ì•½**: `[]`, `{}` í•œ ì¤„ë¡œ í‘œì‹œ
- **ë„¤ì´í‹°ë¸Œ indent ê°ì§€**: macOS ë²„ì „ë³„ ë‹¤ë¥¸ ê¸°ë³¸ indentë¥¼ ê°ì§€í•˜ì—¬ ì‚¬ìš©ì ì„¤ì •ì— ë§ê²Œ ì¬ì¡°ì •

---

## 13. ê¸°ìˆ  êµ¬í˜„ ìƒì„¸

### 13.1 í”„ë¡œì íŠ¸ êµ¬ì¡°
```
OhMyJson/
â”œâ”€â”€ OhMyJsonApp.swift              # ì•± ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ (@main)
â”œâ”€â”€ AppDelegate.swift              # ë©”ë‰´ë°” ì„¤ì •, í•«í‚¤ ë“±ë¡, ì˜¨ë³´ë”©, ì•± ìƒëª…ì£¼ê¸°
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ AppSettings.swift          # @Observable ì„¤ì • ê´€ë¦¬ (UserDefaults, í•«í‚¤, í…Œë§ˆ, ì¸ë´íŠ¸)
â”‚   â”œâ”€â”€ JSONNode.swift             # @Observable JSON íŠ¸ë¦¬ ë°ì´í„° êµ¬ì¡°, ê²€ìƒ‰ ë§¤ì¹­
â”‚   â”œâ”€â”€ JSONTab.swift              # íƒ­ ëª¨ë¸ (ìƒíƒœ ë³´ì¡´ í¬í•¨)
â”‚   â”œâ”€â”€ SampleData.swift           # ì˜¨ë³´ë”©ìš© ìƒ˜í”Œ JSON
â”‚   â””â”€â”€ Theme.swift                # Dark/Light í…Œë§ˆ í”„ë¡œí† ì½œ + êµ¬í˜„
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ ViewerViewModel.swift      # @Observable ì¤‘ì•™ ViewModel (íƒ­/íŒŒì‹±/ê²€ìƒ‰ ìƒíƒœ)
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ AccessibilityManager.swift # @Observable ì ‘ê·¼ì„± ê¶Œí•œ ëª¨ë‹ˆí„°ë§ (0.3ì´ˆ í´ë§)
â”‚   â”œâ”€â”€ AccessibilityManagerProtocol.swift
â”‚   â”œâ”€â”€ ClipboardService.swift     # í´ë¦½ë³´ë“œ ì½ê¸°/ì“°ê¸°
â”‚   â”œâ”€â”€ ClipboardServiceProtocol.swift
â”‚   â”œâ”€â”€ HotKeyManager.swift        # ê¸€ë¡œë²Œ í•«í‚¤ (CGEvent tap, listenOnly)
â”‚   â”œâ”€â”€ HotKeyManagerProtocol.swift
â”‚   â”œâ”€â”€ JSONParser.swift           # JSON íŒŒì‹±, Unicode ìƒˆë‹ˆíƒ€ì´ì§•, ì—ëŸ¬ ìœ„ì¹˜ ì¶”ì¶œ
â”‚   â”œâ”€â”€ JSONParserProtocol.swift
â”‚   â”œâ”€â”€ OnboardingWindowController.swift  # ì˜¨ë³´ë”© ì°½ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ OnboardingControllerProtocol.swift
â”‚   â”œâ”€â”€ TabManager.swift           # @Observable íƒ­ ìƒëª…ì£¼ê¸°, LRU ê´€ë¦¬
â”‚   â”œâ”€â”€ TabManagerProtocol.swift
â”‚   â”œâ”€â”€ WindowManager.swift        # @Observable ë©”ì¸ ì°½ ìƒëª…ì£¼ê¸°, íŠ¸ë˜í”½ ë¼ì´íŠ¸ ì¬ë°°ì¹˜
â”‚   â””â”€â”€ WindowManagerProtocol.swift
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ ViewerWindow.swift         # ë©”ì¸ ì°½ ë ˆì´ì•„ì›ƒ (íƒ­ë°” + ê²€ìƒ‰ + Input + Viewer)
â”‚   â”œâ”€â”€ InputView.swift            # JSON ì…ë ¥ ì—ë””í„° (EditableTextView + UndoableTextView)
â”‚   â”œâ”€â”€ BeautifyView.swift         # í¬ë§¤íŒ…ëœ JSON ë·° (ë¼ì¸ë²ˆí˜¸ + Syntax Highlighting)
â”‚   â”œâ”€â”€ TreeView.swift             # JSON íŠ¸ë¦¬ ë·°
â”‚   â”œâ”€â”€ TreeNodeView.swift         # íŠ¸ë¦¬ ê°œë³„ ë…¸ë“œ ë·°
â”‚   â”œâ”€â”€ SearchBar.swift            # í”Œë¡œíŒ… ê²€ìƒ‰ ë°”
â”‚   â”œâ”€â”€ TabBarView.swift           # ì ì‘í˜• ë„ˆë¹„ íƒ­ ë°”
â”‚   â”œâ”€â”€ SettingsPopover.swift      # ì„¤ì • ì°½ (NSPanel)
â”‚   â”œâ”€â”€ ErrorView.swift            # JSON íŒŒì‹± ì—ëŸ¬ í‘œì‹œ
â”‚   â”œâ”€â”€ ToastView.swift            # í† ìŠ¤íŠ¸ ì•Œë¦¼ + @Observable ToastManager
â”‚   â”œâ”€â”€ PlaceholderView.swift      # ë¹ˆ ìƒíƒœ í‘œì‹œ
â”‚   â”œâ”€â”€ OnboardingView.swift       # ì˜¨ë³´ë”© UI
â”‚   â”œâ”€â”€ AccessibilityOnboardingView.swift  # ì ‘ê·¼ì„± ê¶Œí•œ ì•ˆë‚´ UI
â”‚   â”œâ”€â”€ AccessibilityWarningBanner.swift   # ì ‘ê·¼ì„± ë¯¸ë¶€ì—¬ ê²½ê³  ë°°ë„ˆ
â”‚   â”œâ”€â”€ CheatSheetView.swift       # í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì¹˜íŠ¸ì‹œíŠ¸
â”‚   â”œâ”€â”€ SelectableTextView.swift   # NSTextView ê¸°ë°˜ ì„ íƒ ê°€ëŠ¥ í…ìŠ¤íŠ¸ ë·°
â”‚   â”œâ”€â”€ FastScrollView.swift       # 1.5ë°° ìŠ¤í¬ë¡¤ ì†ë„ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ ë·°
â”‚   â”œâ”€â”€ EventForwardingScrollView.swift  # ì´ë²¤íŠ¸ í¬ì›Œë”© ìŠ¤í¬ë¡¤ ë˜í¼
â”‚   â””â”€â”€ InstantTooltip.swift       # ì¦‰ì‹œ í‘œì‹œ íˆ´íŒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ Assets.xcassets/               # ì•± ì•„ì´ì½˜, ì´ë¯¸ì§€, ìƒ‰ìƒ
â””â”€â”€ OhMyJsonTests/                 # Swift Testing ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (138ê°œ)
    â”œâ”€â”€ JSONParserTests.swift
    â”œâ”€â”€ JSONNodeTests.swift
    â”œâ”€â”€ JSONTabTests.swift
    â”œâ”€â”€ TabManagerTests.swift
    â”œâ”€â”€ AppSettingsTests.swift
    â”œâ”€â”€ ViewerViewModelTests.swift
    â””â”€â”€ Mocks/                     # ì„œë¹„ìŠ¤ í”„ë¡œí† ì½œ Mock êµ¬í˜„ì²´ (7ê°œ)
```

### 13.2 ì˜ì¡´ì„±
- **ConfettiSwiftUI**: ì˜¨ë³´ë”© ì™„ë£Œ ì‹œ ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
- ê·¸ ì™¸ ë„¤ì´í‹°ë¸Œ macOS APIë§Œ í™œìš© (Foundation, AppKit, SwiftUI, Carbon.HIToolbox)

### 13.3 ë¹Œë“œ ì„¤ì •
- Swift 5.9+
- Xcode 15+
- Hardened Runtime: í™œì„±í™”
- App Sandbox: í™œì„±í™” (íŒŒì¼ ì½ê¸° ì „ìš© ì ‘ê·¼)

### 13.4 ì•„í‚¤í…ì²˜ íŒ¨í„´
- **MVVM**: SwiftUI Views + `@Observable` ViewModel/ì„œë¹„ìŠ¤
- **ViewerViewModel**: ì¤‘ì•™ ViewModel â€” íƒ­ ìƒíƒœ, íŒŒì‹±, ê²€ìƒ‰, ë·° ëª¨ë“œ ê´€ë¦¬. `AppDelegate`ì—ì„œ ìƒì„±, `.environment()`ë¡œ ì£¼ì…
- **í”„ë¡œí† ì½œ ê¸°ë°˜ DI**: ëª¨ë“  ì„œë¹„ìŠ¤ê°€ `*Protocol`ë¡œ ì •ì˜, Mock êµ¬í˜„ì²´ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ì‹±ê¸€í†¤**: WindowManager, TabManager, AppSettings, HotKeyManager, ClipboardService, JSONParser, AccessibilityManager
- **Observation**: Swift Observation í”„ë ˆì„ì›Œí¬ (`@Observable`). Viewì—ì„œ `@Environment(Type.self)` ì‚¬ìš©, computed property ë‚´ ë°”ì¸ë”©ì€ `Bindable(obj).prop`
- **í¬ë¡œìŠ¤ ì»´í¬ë„ŒíŠ¸ í†µì‹ **: Combine `PassthroughSubject` (ë¹„-SwiftUI êµ¬ë…ìš©: `hotKeyChanged`, `jsonIndentChanged`, `accessibilityChanged`), ì§ì ‘ í´ë¡œì € ì½œë°± (`onNeedShowWindow`)
- **NSView ë¸Œë¦¬ì§€**: EditableTextView (NSTextView), UndoableTextView (NSViewRepresentable), ClickThroughHostingView, ResizeCursorView

### 13.5 í…ŒìŠ¤íŠ¸
- **í”„ë ˆì„ì›Œí¬**: Swift Testing (`import Testing`, `@Test`, `@Suite`, `#expect`)
- **138ê°œ í…ŒìŠ¤íŠ¸**: JSONParser, JSONNode, JSONTab, TabManager, AppSettings, ViewerViewModel (6ê°œ Suite)
- **Mock ê¸°ë°˜**: `OhMyJsonTests/Mocks/`ì— ê° ì„œë¹„ìŠ¤ í”„ë¡œí† ì½œì˜ Mock êµ¬í˜„ì²´ (7ê°œ)
- **ì‹¤í–‰**: `xcodebuild test -only-testing:OhMyJsonTests`

---

## 14. íƒ­ ë°” ì ì‘í˜• ë„ˆë¹„ ì‹œìŠ¤í…œ

### 14.1 ê°œìš”
íƒ­ ê°œìˆ˜ê°€ ì ì„ ë•ŒëŠ” ê³ ì • ë„ˆë¹„(150pt)ë¥¼ ìœ ì§€í•˜ê³ , íƒ­ì´ ê°€ìš© ì˜ì—­ì„ ì´ˆê³¼í•  ë•Œ ìŠ¤í¬ë¡¤ ëŒ€ì‹  ê· ë“± ë¶„ë°° ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ì ì‘í˜• íƒ­ ë„ˆë¹„ ì‹œìŠ¤í…œ.

### 14.2 ë‘ ê°€ì§€ ëª¨ë“œ

#### ê³ ì • ë„ˆë¹„ ëª¨ë“œ (Fixed Width Mode)
- **ì¡°ê±´**: ëª¨ë“  íƒ­ì˜ ì´ ë„ˆë¹„(íƒ­ ìˆ˜ Ã— 150pt + íƒ­ ê°„ê²©)ê°€ ê°€ìš© ì˜ì—­ ì´í•˜ì¼ ë•Œ
- **íƒ­ ë„ˆë¹„**: 150pt ê³ ì •

#### ê· ë“± ë¶„ë°° ëª¨ë“œ (Equal Distribution Mode)
- **ì¡°ê±´**: ëª¨ë“  íƒ­ì˜ ì´ ë„ˆë¹„ê°€ ê°€ìš© ì˜ì—­ì„ ì´ˆê³¼í•  ë•Œ
- **íƒ­ ë„ˆë¹„**: (ê°€ìš© ì˜ì—­ - ì´ ê°„ê²©) Ã· íƒ­ ìˆ˜
- **ìµœì†Œ ë„ˆë¹„ ì—†ìŒ**: ìŠ¤í¬ë¡¤ ë°œìƒí•˜ì§€ ì•ŠìŒ

### 14.3 ëª¨ë“œ ì „í™˜ ì¡°ê±´

```
ê°€ìš© ì˜ì—­ = ìœˆë„ìš° í­ - ì¢Œì¸¡ ìš”ì†Œ - ê°„ê²©ë“¤ - íŒ¨ë”©
ì¢Œì¸¡ ìš”ì†Œ = trafficLightWidth(60pt) + themeButtonWidth(30pt) + addTabButtonWidth(10pt)
ê°„ê²© = elementPadding(10pt) Ã— 3 + edgePadding(10pt) Ã— 2
íƒ­ ê°„ê²© = (íƒ­ ìˆ˜ - 1) Ã— 6pt

í•„ìš” ë„ˆë¹„ = íƒ­ ìˆ˜ Ã— 150pt + íƒ­ ê°„ê²©

if í•„ìš” ë„ˆë¹„ > ê°€ìš© ì˜ì—­:
    ê· ë“± ë¶„ë°° ëª¨ë“œ â†’ íƒ­ ë„ˆë¹„ = (ê°€ìš© ì˜ì—­ - íƒ­ ê°„ê²©) / íƒ­ ìˆ˜
else:
    ê³ ì • ë„ˆë¹„ ëª¨ë“œ â†’ íƒ­ ë„ˆë¹„ = 150pt
```

### 14.4 íƒ­ ê°„ê²©
- **ëª¨ë“  ëª¨ë“œì—ì„œ 6pt ê°„ê²© ìœ ì§€**

### 14.5 íƒ­ í…ìŠ¤íŠ¸ í‘œì‹œ

#### í…ìŠ¤íŠ¸ ì •ë ¬
- **trailing(ì˜¤ë¥¸ìª½) ì •ë ¬**: í…ìŠ¤íŠ¸ê°€ ì˜ë¦´ ë•Œ ë’·ë¶€ë¶„(ìµœê·¼ ì‹œê°„)ì´ ë³´ì´ë„ë¡
- ì˜ˆ: `"02/06, 14:32:15"` â†’ ì¢ì•„ì§€ë©´ `"32:15"` ë¶€ë¶„ì´ ë³´ì´ê³  ì•ë¶€ë¶„ ì‚¬ë¼ì§

#### Gradient Fade íš¨ê³¼
- **leading(ì™¼ìª½) fade**: í…ìŠ¤íŠ¸ê°€ ì˜ë¦¬ëŠ” ì™¼ìª½ ì˜ì—­ì— gradient ì ìš©
- **ì¡°ê±´**: ê· ë“± ë¶„ë°° ëª¨ë“œ(compressed)ì¼ ë•Œë§Œ ì ìš©
- **ì ìš© ë²”ìœ„**: í…ìŠ¤íŠ¸ ì˜ì—­ì—ë§Œ ì ìš©, close(Ã—) ë²„íŠ¼ì€ gradient ì˜í–¥ ë°›ì§€ ì•ŠìŒ
- **Gradient ìƒ‰ìƒ**: íƒ­ ë°°ê²½ìƒ‰(active/inactive/hoveredì— ë”°ë¼) â†’ íˆ¬ëª… (20pt ë„ˆë¹„)

### 14.6 Close(Ã—) ë²„íŠ¼
- **í•­ìƒ í‘œì‹œ**: íƒ­ì´ ì•„ë¬´ë¦¬ ì¢ì•„ì ¸ë„ close ë²„íŠ¼ í•­ìƒ ë³´ì„
- **ìœ„ì¹˜**: íƒ­ ì˜¤ë¥¸ìª½ ê³ ì • (14 Ã— 14pt)
- **gradient ë…ë¦½**: close ë²„íŠ¼ì€ gradient fade ì˜ì—­ ë°–ì— ìœ„ì¹˜

### 14.7 íƒ­ ë‚´ë¶€ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [gradient] title text   [Ã—] â”‚  â† ê³ ì • ë„ˆë¹„ (150pt) ë˜ëŠ” ê· ë“± ë¶„ë°° ë„ˆë¹„
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

- title text: trailing ì •ë ¬, ë„˜ì¹˜ë©´ leadingì—ì„œ gradient fade
- Ã—: íƒ­ ìš°ì¸¡ ê³ ì • (14pt), gradient ì˜í–¥ ì—†ìŒ
- gradient: íƒ­ ë°°ê²½ìƒ‰ â†’ íˆ¬ëª… (20pt), compressed ëª¨ë“œì—ì„œë§Œ í‘œì‹œ
```

### 14.8 íƒ­ ë°” ì „ì²´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Traffic 60pt] [ğŸŒ™ 30pt] â”‚  [Tab1] [Tab2] [Tab3] ...  â”‚  [+ 10pt] â”‚
â”‚  â† ì¢Œì¸¡ ê³ ì • â†’            â”‚  â† íƒ­ ì˜ì—­ (ê°€ë³€) â†’        â”‚  â† ìš°ì¸¡ â†’ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ë†’ì´: 40pt
```

### 14.9 Active/Inactive íƒ­ ìŠ¤íƒ€ì¼
- **ë™ì¼í•œ ë„ˆë¹„**: active íƒ­ê³¼ inactive íƒ­ ëª¨ë‘ ê°™ì€ ë„ˆë¹„
- **Active íƒ­**: ë°°ê²½ìƒ‰ + semibold í°íŠ¸ + shadow
- **Inactive íƒ­**: ë°°ê²½ìƒ‰ + regular í°íŠ¸
- **Hovered íƒ­**: ë³„ë„ ë°°ê²½ìƒ‰

---

## 15. ì¹˜íŠ¸ì‹œíŠ¸

### 15.1 ê°œìš”
- ë·°ì–´ ì°½ ìš°ì¸¡ í•˜ë‹¨ì˜ âŒ¨ï¸ ì•„ì´ì½˜ ë²„íŠ¼ìœ¼ë¡œ ì—´ê¸°/ë‹«ê¸°
- `Esc`ë¡œ ë‹«ê¸°
- ëª¨ë“  í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ë¥¼ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ë¦¬í•˜ì—¬ í‘œì‹œ

### 15.2 ì¹´í…Œê³ ë¦¬
- **General**: Import JSON, Settings, Quit
- **Tabs**: New/Close/Previous/Next Tab
- **View**: Beautify/Tree Mode
- **Search**: Find, Close Search, Navigate Results
- **Edit**: Undo, Redo, Copy/Paste/Cut

---

## 16. í† ìŠ¤íŠ¸ ì‹œìŠ¤í…œ

- í™”ë©´ í•˜ë‹¨ ì¤‘ì•™ì— í‘œì‹œ
- ê¸°ë³¸ í‘œì‹œ ì‹œê°„: 1.5ì´ˆ (ì»¤ìŠ¤í…€ ê°€ëŠ¥)
- ì‚¬ìš©ì²˜:
  - í´ë¦½ë³´ë“œ ë³µì‚¬ ì„±ê³µ
  - Invalid JSON ì•Œë¦¼
  - íƒ­ ìë™ ë‹«ê¸° ì•Œë¦¼
  - íƒ­ ìˆ˜ ê²½ê³ 

---

## 17. ìë™ ì—…ë°ì´íŠ¸ (Check for Updates)

### 17.1 ê°œìš”
- **í”„ë ˆì„ì›Œí¬**: [Sparkle 2](https://sparkle-project.org/) (macOS ìë™ ì—…ë°ì´íŠ¸ ì‚¬ì‹¤ìƒ í‘œì¤€)
- **ì˜ì¡´ì„± ê´€ë¦¬**: SPM (Swift Package Manager) â€” ê¸°ì¡´ ConfettiSwiftUIì™€ ë™ì¼ ë°©ì‹
- **ì—…ë°ì´íŠ¸ í¬ë§·**: zip (Sparkleì´ ìë™ìœ¼ë¡œ .app êµì²´)
- **ì„œëª…**: EdDSA (ed25519) + Apple Developer ID ì½”ë“œì„œëª… ë³‘í–‰
- **Appcast í˜¸ìŠ¤íŒ…**: GitHub repo ë‚´ `appcast.xml` (raw.githubusercontent.com URL)
- **Sandbox**: ìœ ì§€ â€” Sparkleì˜ XPC Serviceë¥¼ í†µí•œ sandboxed ì—…ë°ì´íŠ¸

### 17.2 ê¸°ë³¸ ë™ì‘
- **ê¸°ë³¸ê°’**: ìˆ˜ë™ ì²´í¬ë§Œ (ì‚¬ìš©ìê°€ "Check for Updates" í´ë¦­ ì‹œ)
- **ìë™ ì²´í¬**: ì„¤ì •ì—ì„œ opt-in í† ê¸€ ì œê³µ ("Automatically check for updates")
  - í™œì„±í™” ì‹œ: ì•± ì‹œì‘ ì‹œ + Sparkle ê¸°ë³¸ ì£¼ê¸°(í•˜ë£¨ 1íšŒ)ë¡œ ë°±ê·¸ë¼ìš´ë“œ ì²´í¬
  - ë¹„í™œì„±í™” ì‹œ: ìˆ˜ë™ í´ë¦­ë§Œìœ¼ë¡œ ì²´í¬
- **ì‹œìŠ¤í…œ í”„ë¡œí•„ ìˆ˜ì§‘**: ë¹„í™œì„±í™” (`SUEnableSystemProfiling = NO`)

### 17.3 ì—…ë°ì´íŠ¸ íë¦„

```
ì‚¬ìš©ì: "Check for Updates" í´ë¦­ (ë˜ëŠ” ìë™ ì²´í¬ íŠ¸ë¦¬ê±°)
    â†“
Sparkle: appcast.xml ë‹¤ìš´ë¡œë“œ (raw.githubusercontent.com)
    â†“
Sparkle: í˜„ì¬ CFBundleShortVersionStringê³¼ appcastì˜ ìµœì‹  ë²„ì „ ë¹„êµ
    â†“
[ìƒˆ ë²„ì „ ìˆìŒ]                          [ìµœì‹  ë²„ì „]
    â†“                                      â†“
ì—…ë°ì´íŠ¸ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ                "ìµœì‹  ë²„ì „ì…ë‹ˆë‹¤" ì•Œë¦¼
(Release Notes + ì„¤ì¹˜ ë²„íŠ¼)
    â†“
ì‚¬ìš©ì: "Install Update" í´ë¦­
    â†“
Sparkle: zip ë‹¤ìš´ë¡œë“œ â†’ EdDSA ì„œëª… ê²€ì¦ â†’ .app êµì²´
    â†“
Sparkle: ì•± ì¢…ë£Œ â†’ ìƒˆ ë²„ì „ìœ¼ë¡œ ìë™ ì¬ì‹œì‘
```

### 17.4 UI ë°°ì¹˜

#### 17.4.1 ë©”ì¸ ë©”ë‰´ ë°” (App Menu)
```
OhMyJson
â”œâ”€â”€ About OhMyJson
â”œâ”€â”€ Check for Updates...    â† ì¶”ê°€ (Sparkleì˜ SPUStandardUpdaterController.checkForUpdates ì—°ê²°)
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”œâ”€â”€ Settings           âŒ˜,
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â””â”€â”€ Quit              âŒ˜Q
```

#### 17.4.2 ë©”ë‰´ë°” Status Item ë©”ë‰´
```
[ì•± ì•„ì´ì½˜ í´ë¦­ ì‹œ]
â”œâ”€â”€ Open
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”œâ”€â”€ Check for Updates...    â† ì¶”ê°€
â”œâ”€â”€ Settings...        âŒ˜,
â”œâ”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â””â”€â”€ Quit OhMyJson     âŒ˜Q
```

#### 17.4.3 SettingsPopover
- **ìœ„ì¹˜**: Footer ì„¹ì…˜ (GitHub / Report Bug ë²„íŠ¼ë“¤ ìœ„)
- **í•­ëª©**:
  - "Check for Updates" ë²„íŠ¼ (í´ë¦­ ì‹œ ìˆ˜ë™ ì²´í¬)
  - "Automatically check for updates" Toggle (ê¸°ë³¸ê°’: `false`)

### 17.5 Sparkle í†µí•© ìƒì„¸

#### 17.5.1 SPM íŒ¨í‚¤ì§€ ì¶”ê°€
```
Package: https://github.com/sparkle-project/Sparkle
Version: 2.x (Up to Next Major)
Products: Sparkle
```

#### 17.5.2 Info.plist ì„¤ì •
| í‚¤ | ê°’ | ì„¤ëª… |
|----|-----|------|
| `SUFeedURL` | `https://raw.githubusercontent.com/vagabond95/OhMyJson/main/appcast.xml` | Appcast URL |
| `SUPublicEDKey` | `(ìƒì„±ëœ ed25519 public key)` | EdDSA ê³µê°œí‚¤ |
| `SUEnableAutomaticChecks` | `NO` | ê¸°ë³¸ê°’: ìë™ ì²´í¬ ë¹„í™œì„± |
| `SUEnableSystemProfiling` | `NO` | ì‹œìŠ¤í…œ í”„ë¡œí•„ ë¹„ì „ì†¡ |

#### 17.5.3 Entitlements ì¶”ê°€
```xml
<!-- OhMyJson.entitlements ì— ì¶”ê°€ -->
<key>com.apple.security.network.client</key>
<true/>
```

#### 17.5.4 AppDelegate í†µí•©
- `SPUStandardUpdaterController` ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ì•± ì‹œì‘ ì‹œ)
- ë©”ë‰´ ì•„ì´í…œì˜ target/actionì„ `SPUStandardUpdaterController.checkForUpdates(_:)` ì— ì—°ê²°
- `SPUUpdater.automaticallyChecksForUpdates` í”„ë¡œí¼í‹°ë¥¼ `AppSettings.autoCheckForUpdates`ì™€ ë°”ì¸ë”©
- **LSUIElement ëŒ€ì‘**: Sparkle ì—…ë°ì´íŠ¸ ë‹¤ì´ì–¼ë¡œê·¸ê°€ í‘œì‹œë  ë•Œ `NSApp.activate()`ë¡œ ì•±ì„ foregroundë¡œ ì „í™˜í•˜ì—¬ ë‹¤ì´ì–¼ë¡œê·¸ì— í¬ì»¤ìŠ¤ê°€ ì¡íˆë„ë¡ ì²˜ë¦¬

#### 17.5.5 AppSettings í™•ì¥
| í”„ë¡œí¼í‹° | íƒ€ì… | ê¸°ë³¸ê°’ | UserDefaults í‚¤ |
|----------|------|--------|-----------------|
| `autoCheckForUpdates` | `Bool` | `false` | `autoCheckForUpdates` |

- Sparkleì´ ë‚´ë¶€ì ìœ¼ë¡œ `SULastCheckTime`, `SUEnableAutomaticChecks` ë“±ì„ UserDefaultsì— ì €ì¥
- `AppSettings.autoCheckForUpdates` ë³€ê²½ ì‹œ `SPUUpdater.automaticallyChecksForUpdates`ì— ë™ê¸°í™”

### 17.6 Appcast (appcast.xml)

#### 17.6.1 í˜¸ìŠ¤íŒ…
- **ìœ„ì¹˜**: repo ë£¨íŠ¸ì˜ `appcast.xml`
- **URL**: `https://raw.githubusercontent.com/vagabond95/OhMyJson/main/appcast.xml`
- ë¦´ë¦¬ìŠ¤ ì‹œ GitHub Actionsì—ì„œ ìë™ ì—…ë°ì´íŠ¸

#### 17.6.2 Appcast êµ¬ì¡°
```xml
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle"
     xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>OhMyJson</title>
    <link>https://github.com/vagabond95/OhMyJson</link>
    <item>
      <title>Version X.Y.Z</title>
      <sparkle:version>BUILD_NUMBER</sparkle:version>
      <sparkle:shortVersionString>X.Y.Z</sparkle:shortVersionString>
      <sparkle:minimumSystemVersion>14.0</sparkle:minimumSystemVersion>
      <description><![CDATA[
        <h2>What's New</h2>
        <ul><li>GitHub Release body ë‚´ìš©</li></ul>
      ]]></description>
      <pubDate>RFC 2822 í˜•ì‹ ë‚ ì§œ</pubDate>
      <enclosure
        url="https://github.com/vagabond95/OhMyJson/releases/download/vX.Y.Z/OhMyJson_vX.Y.Z.zip"
        length="íŒŒì¼í¬ê¸°(ë°”ì´íŠ¸)"
        type="application/octet-stream"
        sparkle:edSignature="EdDSA ì„œëª…ê°’" />
    </item>
    <!-- ì´ì „ ë²„ì „ë“¤ë„ ìœ ì§€ (minimumSystemVersion í™œìš©) -->
  </channel>
</rss>
```

#### 17.6.3 minimumSystemVersion
- ê° ë¦´ë¦¬ìŠ¤ í•­ëª©ì— `sparkle:minimumSystemVersion` í¬í•¨
- ì‚¬ìš©ìì˜ macOSê°€ ìš”êµ¬ ë²„ì „ ë¯¸ë§Œì´ë©´ í•´ë‹¹ ì—…ë°ì´íŠ¸ í•­ëª©ì„ ê±´ë„ˆëœ€
- í–¥í›„ macOS 15+ ì „ìš© ê¸°ëŠ¥ ë¦´ë¦¬ìŠ¤ ì‹œ êµ¬ë²„ì „ ì‚¬ìš©ì ë³´í˜¸

### 17.7 EdDSA ì„œëª…

#### 17.7.1 í‚¤ ìƒì„± (ìµœì´ˆ 1íšŒ)
```bash
# Sparkleì˜ generate_keys ë„êµ¬ ì‚¬ìš©
./bin/generate_keys
# â†’ EdDSA (ed25519) í‚¤ ìŒ ìƒì„±
# â†’ Private key: Keychainì— ì €ì¥ (ë¡œì»¬) + GitHub Secretsì— ì €ì¥ (CI)
# â†’ Public key: Info.plistì˜ SUPublicEDKeyì— ì…ë ¥
```

#### 17.7.2 ì„œëª… í”„ë¡œì„¸ìŠ¤
```bash
# sign_update ë„êµ¬ë¡œ zip íŒŒì¼ ì„œëª…
./bin/sign_update OhMyJson_vX.Y.Z.zip
# â†’ EdDSA ì„œëª…ê°’ ì¶œë ¥ â†’ appcast.xmlì˜ sparkle:edSignatureì— ì‚¬ìš©
```

### 17.8 CI/CD íŒŒì´í”„ë¼ì¸ ë³€ê²½

#### 17.8.1 ê¸°ì¡´ release.yml í™•ì¥ ì‚¬í•­
ê¸°ì¡´ DMG ìƒì„± íŒŒì´í”„ë¼ì¸ì— ë‹¤ìŒ ë‹¨ê³„ ì¶”ê°€:

```
ê¸°ì¡´ íë¦„:
  ë¹Œë“œ â†’ ì„œëª… â†’ DMG â†’ ê³µì¦ â†’ GitHub Release â†’ Homebrew Cask

ë³€ê²½ í›„:
  ë¹Œë“œ â†’ ì„œëª… â†’ DMG â†’ ê³µì¦ â†’ zip ìƒì„± â†’ EdDSA ì„œëª…
  â†’ appcast.xml ì—…ë°ì´íŠ¸ â†’ GitHub Release (DMG + zip) â†’ Homebrew Cask
```

#### 17.8.2 ì¶”ê°€ CI ë‹¨ê³„

| ë‹¨ê³„ | ë‚´ìš© |
|------|------|
| **zip ìƒì„±** | ë¹Œë“œëœ .appì„ `ditto -c -k --keepParent` ìœ¼ë¡œ zip ì•„ì¹´ì´ë¸Œ |
| **EdDSA ì„œëª…** | Sparkleì˜ `sign_update` ë¡œ zip ì„œëª…. Private keyëŠ” GitHub Secrets (`SPARKLE_EDDSA_KEY`) |
| **appcast ì—…ë°ì´íŠ¸** | ê¸°ì¡´ appcast.xmlì— ìƒˆ `<item>` ì¶”ê°€ (ë˜ëŠ” Sparkleì˜ `generate_appcast` í™œìš©) |
| **appcast ì»¤ë°‹** | ì—…ë°ì´íŠ¸ëœ appcast.xmlì„ main ë¸Œëœì¹˜ì— ì»¤ë°‹ & push |
| **Release ì—…ë¡œë“œ** | GitHub Releaseì— DMG + zip ëª¨ë‘ ì—…ë¡œë“œ |

#### 17.8.3 GitHub Secrets ì¶”ê°€

| Secret | ìš©ë„ |
|--------|------|
| `SPARKLE_EDDSA_KEY` | EdDSA private key (Sparkle sign_updateì—ì„œ ì‚¬ìš©) |

### 17.9 Homebrew Tap ì—°ë™

#### 17.9.1 ê¸°ì¡´ homebrew-ohmyjson ë ˆí¬
- ê¸°ì¡´: DMG ê¸°ë°˜ Cask formula
- ë³€ê²½ ì—†ìŒ â€” CaskëŠ” DMG ì„¤ì¹˜ ê²½ë¡œ, Sparkleì€ zip ì—…ë°ì´íŠ¸ ê²½ë¡œ
- `brew install --cask ohmyjson` â†’ DMGì—ì„œ ì„¤ì¹˜ (ìµœì´ˆ)
- ì´í›„ ì—…ë°ì´íŠ¸ëŠ” Sparkleì´ zipìœ¼ë¡œ ì²˜ë¦¬
- `brew upgrade ohmyjson` â†’ DMGë¡œ ì¬ì„¤ì¹˜ (Sparkle ì—…ë°ì´íŠ¸ì™€ ë™ì¼ íš¨ê³¼)

#### 17.9.2 ë²„ì „ ë™ê¸°í™”
- Sparkleë¡œ ì—…ë°ì´íŠ¸í•œ ì‚¬ìš©ì: Homebrewê°€ ì¶”ì í•˜ëŠ” ë²„ì „ê³¼ ì‹¤ì œ ì•± ë²„ì „ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ
- `brew upgrade`ëŠ” Cask formula ë²„ì „ê³¼ ì„¤ì¹˜ëœ ë²„ì „ì„ ë¹„êµ â†’ Sparkleë¡œ ì´ë¯¸ ìµœì‹ ì´ë©´ no-op
- ë¦´ë¦¬ìŠ¤ ì‹œ Cask formulaë„ í•¨ê»˜ ì—…ë°ì´íŠ¸í•˜ë¯€ë¡œ ì‹¤ì‚¬ìš©ì— ë¬¸ì œ ì—†ìŒ

### 17.10 ë²„ì „ ê¸°ë°˜ ì„¤ì • ì´ˆê¸°í™” ì˜í–¥
- ê¸°ì¡´: ì•± ë²„ì „ ë³€ê²½ ì‹œ UserDefaults ì „ì²´ ë¦¬ì…‹ (ì„¹ì…˜ 9.5)
- **ì£¼ì˜**: Sparkleì˜ UserDefaults í‚¤(`SULastCheckTime`, `SUEnableAutomaticChecks` ë“±)ë„ ë¦¬ì…‹ë¨
- **ëŒ€ì‘**: ì„¤ì • ì´ˆê¸°í™” ë¡œì§ì—ì„œ Sparkle ê´€ë ¨ í‚¤(`SU` prefix)ë¥¼ ì œì™¸í•˜ê±°ë‚˜, `autoCheckForUpdates`ì˜ ê¸°ë³¸ê°’ì„ `false`ë¡œ ìœ ì§€í•˜ì—¬ ë¦¬ì…‹ í›„ì—ë„ ì•ˆì „í•œ ìƒíƒœ ë³´ì¥

### 17.11 Release Notes
- GitHub Releaseì˜ body(ë§ˆí¬ë‹¤ìš´)ë¥¼ appcastì˜ `<description>` CDATAì— HTML ë³€í™˜í•˜ì—¬ í¬í•¨
- Sparkle ì—…ë°ì´íŠ¸ ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ ë Œë”ë§
- CIì—ì„œ ìë™ ì¶”ì¶œ: `gh release view vX.Y.Z --json body -q .body`

### 17.12 ì¸ì•± ì—…ë°ì´íŠ¸ ë°°ë„ˆ

#### 17.12.1 ë°°ê²½ ë° ëª©ì 
- OhMyJsonì€ í•«í‚¤ë¡œ í˜¸ì¶œë˜ëŠ” ë©”ë‰´ë°” ìƒì£¼ ì•± â†’ ì‚¬ìš©ìê°€ Settingsë¥¼ ìì£¼ ì—´ì§€ ì•ŠìŒ
- LSUIElement ì•±ì—ì„œ Sparkle ê¸°ë³¸ ëª¨ë‹¬ì€ í¬ì»¤ìŠ¤/z-order ë¬¸ì œê°€ ë¹ˆë²ˆ (Ice ì•± ì‚¬ë¡€)
- Sparkle 2.2+ì˜ Gentle Reminders APIë¥¼ í™œìš©í•˜ì—¬ ìë™ ì²´í¬ ì‹œ ëª¨ë‹¬ì„ ì–µì œí•˜ê³ , ViewerWindow ë‚´ ë°°ë„ˆë¡œ ëŒ€ì²´
- **ì°¸ê³ **: Raycastì˜ "ì•± ë‚´ ìì—°ìŠ¤ëŸ¬ìš´ ì—…ë°ì´íŠ¸ ë…¸ì¶œ" íŒ¨í„´ ì±„íƒ

#### 17.12.2 ë ˆì´ì•„ì›ƒ
- **ìœ„ì¹˜**: TabBarì™€ ë©”ì¸ ì½˜í…ì¸ (GeometryReader) ì‚¬ì´ì— Push ë°©ì‹ìœ¼ë¡œ ì‚½ì…
- **ë†’ì´**: ~28pt ìŠ¬ë¦¼ ë°”
- **ë„ˆë¹„**: ìœˆë„ìš° ì „ì²´ ë„ˆë¹„ (full-width)
- **ì¡°ê±´ë¶€ í‘œì‹œ**: `isUpdateAvailable == true`ì¼ ë•Œë§Œ ë Œë”ë§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tab1  â”‚  Tab2  â”‚  +                     â”‚ â† TabBar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â¬† v2.1.0 available      [Update]  [âœ•]  â”‚ â† ì—…ë°ì´íŠ¸ ë°°ë„ˆ (28pt)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                            â”‚
â”‚   Input      â”‚   Viewer                   â”‚ â† ë©”ì¸ ì½˜í…ì¸ 
â”‚              â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 17.12.3 ë°°ë„ˆ ì½˜í…ì¸  ë° ìŠ¤íƒ€ì¼
- **ì•„ì´ì½˜**: SF Symbol `arrow.up.circle` ë˜ëŠ” ìœ ì‚¬ ì•„ì´ì½˜
- **í…ìŠ¤íŠ¸**: `"v{version} available"` (ë²„ì „ ë²ˆí˜¸ë§Œ, ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸/ë‚ ì§œ ë¶ˆí¬í•¨)
- **Update ë²„íŠ¼**: í´ë¦­ ì‹œ `updaterController.checkForUpdates(nil)` í˜¸ì¶œ â†’ Sparkle í‘œì¤€ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- **Dismiss ë²„íŠ¼**: `âœ•` (xmark) ì•„ì´ì½˜ìœ¼ë¡œ ë°°ë„ˆ ë‹«ê¸°
- **ë°°ê²½ìƒ‰**: `theme.panelBackground` (Settings ì¹´ë“œì™€ ë™ì¼ í†¤)
- **í…ìŠ¤íŠ¸ìƒ‰**: `theme.primaryText`
- **Light/Dark í…Œë§ˆ í˜¸í™˜**: theme ì‹œìŠ¤í…œ í™œìš©ìœ¼ë¡œ ìë™ ëŒ€ì‘
- **No Red ì •ì±… ì¤€ìˆ˜**: accent ìƒ‰ìƒ ë¯¸ì‚¬ìš©, neutral ìƒ‰ìƒë§Œ ì‚¬ìš©
- **ì• ë‹ˆë©”ì´ì…˜**: ì—†ìŒ (ë“±ì¥/í‡´ì¥ ì‹œ ì¦‰ì‹œ í‘œì‹œ/ìˆ¨ê¹€)

#### 17.12.4 Dismiss ì •ì±… â€” í•´ë‹¹ ë²„ì „ ë¬´ì‹œ (Skip Version)
- Dismiss(âœ•) í´ë¦­ ì‹œ í•´ë‹¹ ë²„ì „ ë²ˆí˜¸ë¥¼ `skippedVersion`ìœ¼ë¡œ ì €ì¥
- ê°™ì€ ë²„ì „ì— ëŒ€í•´ì„œëŠ” ë°°ë„ˆë¥¼ ë‹¤ì‹œ í‘œì‹œí•˜ì§€ ì•ŠìŒ
- ë” ìƒˆë¡œìš´ ë²„ì „ì´ ë¦´ë¦¬ìŠ¤ë˜ë©´ `skippedVersion`ê³¼ ë¹„êµí•˜ì—¬ ë‹¤ì‹œ ë°°ë„ˆ í‘œì‹œ
- **ì €ì¥**: UserDefaults (`bannerSkippedVersion` í‚¤)
- **Sparkleì˜ ë‚´ì¥ Skip Versionê³¼ëŠ” ë³„ë„ ê´€ë¦¬** (Sparkle skipì€ ëª¨ë‹¬ ì „ìš©, ë°°ë„ˆ skipì€ ë°°ë„ˆ ì „ìš©)

#### 17.12.5 Sparkle Gentle Reminders í†µí•©

##### Sparkle ëª¨ë‹¬ ì–µì œ ì „ëµ
- `SPUStandardUserDriverDelegate`ë¥¼ AppDelegateì—ì„œ êµ¬í˜„
- **ìë™ ì²´í¬ ì‹œ**: ëª¨ë‹¬ì„ í•­ìƒ ì–µì œí•˜ê³  ë°°ë„ˆë§Œ í‘œì‹œ (immediateFocus ì—¬ë¶€ ë¬´ê´€)
- **ìˆ˜ë™ ì²´í¬ ì‹œ**: Sparkle í‘œì¤€ ëª¨ë‹¬ í—ˆìš© (ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•œ ê²½ìš°)
  - Settingsì˜ "Check for Updates" ë²„íŠ¼ â†’ `checkForUpdates(nil)` â†’ ëª¨ë‹¬ í‘œì‹œ
  - ë°°ë„ˆì˜ "Update" ë²„íŠ¼ â†’ `checkForUpdates(nil)` â†’ ëª¨ë‹¬ í‘œì‹œ

##### êµ¬í˜„í•  Delegate ë©”ì„œë“œ

```swift
// 1. Gentle reminders ì§€ì› ì„ ì–¸
var supportsGentleScheduledUpdateReminders: Bool { true }

// 2. ìë™ ì²´í¬ ì‹œ ëª¨ë‹¬ ì–µì œ (í•­ìƒ false ë°˜í™˜ â†’ Sparkleê°€ ëª¨ë‹¬ì„ ë„ìš°ì§€ ì•ŠìŒ)
func standardUserDriverShouldHandleShowingScheduledUpdate(
    _ update: SUAppcastItem,
    andInImmediateFocus immediateFocus: Bool
) -> Bool {
    return false  // immediateFocus ì—¬ë¶€ ë¬´ê´€í•˜ê²Œ í•­ìƒ ëª¨ë‹¬ ì–µì œ
}

// 3. ë°°ë„ˆ í‘œì‹œ íŠ¸ë¦¬ê±° (ëª¨ë‹¬ì´ ì–µì œë˜ì—ˆì„ ë•Œ í˜¸ì¶œë¨)
func standardUserDriverWillHandleShowingUpdate(
    _ handleShowingUpdate: Bool,
    forUpdate update: SUAppcastItem,
    state: SPUUserUpdateState
) {
    if !handleShowingUpdate {
        // ViewModelì— ì—…ë°ì´íŠ¸ ê°€ìš© ìƒíƒœ ì „ë‹¬
        viewModel.setUpdateAvailable(version: update.displayVersionString)
    }
}

// 4. ì—…ë°ì´íŠ¸ ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì •ë¦¬
func standardUserDriverWillFinishUpdateSession() {
    // ë°°ë„ˆ ìƒíƒœ ì •ë¦¬ (ì„¤ì¹˜ ì™„ë£Œ ë˜ëŠ” ì‚¬ìš©ìê°€ Sparkle ëª¨ë‹¬ì—ì„œ ì·¨ì†Œí•œ ê²½ìš°)
}
```

##### SPUUpdaterDelegate (ì—…ë°ì´íŠ¸ ë°œê²¬ ì½œë°±)
```swift
// ìœ íš¨í•œ ì—…ë°ì´íŠ¸ ë°œê²¬ ì‹œ (ìë™ ì²´í¬ + ìˆ˜ë™ ì²´í¬ ëª¨ë‘)
func updater(_ updater: SPUUpdater, didFindValidUpdate item: SUAppcastItem) {
    viewModel.setUpdateAvailable(version: item.displayVersionString)
}

// ì—…ë°ì´íŠ¸ ì—†ìŒ
func updaterDidNotFindUpdate(_ updater: SPUUpdater, error: Error) {
    // ì¡°ìš©íˆ ë¬´ì‹œ (ë°°ë„ˆ ë¯¸í‘œì‹œ, ì—ëŸ¬ ë¡œê·¸ë§Œ)
}
```

#### 17.12.6 ìƒíƒœ ê´€ë¦¬

##### ViewerViewModel í™•ì¥
| í”„ë¡œí¼í‹° | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| `isUpdateAvailable` | `Bool` (computed) | `availableVersion != nil && availableVersion != skippedVersion` |
| `availableVersion` | `String?` | Sparkleì—ì„œ ë°œê²¬í•œ ìµœì‹  ë²„ì „ (displayVersionString) |
| `skippedVersion` | `String?` | ì‚¬ìš©ìê°€ dismissí•œ ë²„ì „ (UserDefaults ë™ê¸°í™”) |

##### ë©”ì„œë“œ
| ë©”ì„œë“œ | ë™ì‘ |
|--------|------|
| `setUpdateAvailable(version:)` | `availableVersion` ì„¤ì •. `skippedVersion`ê³¼ ë‹¤ë¥¼ ë•Œë§Œ ë°°ë„ˆ í‘œì‹œ |
| `dismissUpdateBanner()` | `skippedVersion = availableVersion`ìœ¼ë¡œ ì„¤ì •, UserDefaults ì €ì¥ |

##### ë°ì´í„° íë¦„
```
Sparkle ìë™ ì²´í¬ (24h ì£¼ê¸°)
    â†“
SPUStandardUserDriverDelegate
  â†’ standardUserDriverShouldHandleShowingScheduledUpdate â†’ return false (ëª¨ë‹¬ ì–µì œ)
  â†’ standardUserDriverWillHandleShowingUpdate â†’ viewModel.setUpdateAvailable(version:)
    â†“
ViewerViewModel.isUpdateAvailable == true
    â†“
ViewerWindow: UpdateBanner í‘œì‹œ
    â†“
[ì‚¬ìš©ì "Update" í´ë¦­]              [ì‚¬ìš©ì "âœ•" í´ë¦­]
    â†“                                   â†“
updaterController.checkForUpdates()    viewModel.dismissUpdateBanner()
    â†“                                   â†“
Sparkle í‘œì¤€ ëª¨ë‹¬ í‘œì‹œ               skippedVersionì— ì €ì¥
(ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ + Install)              ë°°ë„ˆ ìˆ¨ê¹€
    â†“                                (ë‹¤ìŒ ìƒˆ ë²„ì „ê¹Œì§€ ì¬í‘œì‹œ ì•ˆ í•¨)
Sparkle: ë‹¤ìš´ë¡œë“œ â†’ ì„¤ì¹˜ â†’ ì¬ì‹œì‘
```

#### 17.12.7 Settings Popover ì—°ë™
- **ê¸°ì¡´ UI ìœ ì§€**: "Auto check for updates" í† ê¸€, "Check for Updates" ë²„íŠ¼ ëª¨ë‘ ë³€ê²½ ì—†ìŒ
- "Check for Updates" ë²„íŠ¼ â†’ `checkForUpdates(nil)` â†’ Sparkle ëª¨ë‹¬ í‘œì‹œ (ê¸°ì¡´ ë™ì‘ ìœ ì§€)
- ë°°ë„ˆì™€ SettingsëŠ” ë™ì¼í•œ ViewModel ìƒíƒœ(`isUpdateAvailable`)ë¥¼ ê³µìœ í•˜ë¯€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë™ê¸°í™”

#### 17.12.8 ì—ëŸ¬ ì²˜ë¦¬
- ë„¤íŠ¸ì›Œí¬ ì˜¤í”„ë¼ì¸ ë“±ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ì²´í¬ ì‹¤íŒ¨ ì‹œ: **ì¡°ìš©íˆ ì‹¤íŒ¨**
- ë°°ë„ˆì— ì—ëŸ¬ ìƒíƒœë¥¼ í‘œì‹œí•˜ì§€ ì•ŠìŒ
- ì—ëŸ¬ ë¡œê·¸ë§Œ ì¶œë ¥ (`print` ë˜ëŠ” Sentry)
- ë‹¤ìŒ ìë™ ì²´í¬ ì£¼ê¸°ì—ì„œ ì¬ì‹œë„

#### 17.12.9 ì—£ì§€ ì¼€ì´ìŠ¤

| ì‹œë‚˜ë¦¬ì˜¤ | ë™ì‘ |
|----------|------|
| ë°°ë„ˆ í‘œì‹œ ì¤‘ ì‚¬ìš©ìê°€ Settingsì—ì„œ ìˆ˜ë™ ì²´í¬ | Sparkle ëª¨ë‹¬ ì •ìƒ í‘œì‹œ. ëª¨ë‹¬ì—ì„œ ì„¤ì¹˜ ì‹œ ì•± ì¬ì‹œì‘ |
| ë°°ë„ˆ dismiss í›„ ê°™ì€ ì„¸ì…˜ì—ì„œ Sparkleê°€ ë‹¤ì‹œ ì²´í¬ | `skippedVersion`ê³¼ ê°™ìœ¼ë©´ ë°°ë„ˆ ë¯¸í‘œì‹œ |
| ë°°ë„ˆ dismiss í›„ ìƒˆ ë²„ì „ì´ ë¦´ë¦¬ìŠ¤ë¨ | `availableVersion > skippedVersion` â†’ ë°°ë„ˆ ì¬í‘œì‹œ |
| `autoCheckForUpdates`ê°€ êº¼ì ¸ ìˆì„ ë•Œ | Sparkle ìë™ ì²´í¬ ì•ˆ í•¨ â†’ ë°°ë„ˆ í‘œì‹œ ì•ˆ ë¨. ìˆ˜ë™ ì²´í¬ë§Œ ê°€ëŠ¥ |
| ì•± ì‹œì‘ ì§í›„ Sparkleê°€ ì—…ë°ì´íŠ¸ ë°œê²¬ (immediateFocus=true) | ëª¨ë‹¬ ì–µì œ, ë°°ë„ˆë§Œ í‘œì‹œ |
| Sparkle ëª¨ë‹¬ì—ì„œ "Skip This Version" ì„ íƒ | Sparkle ë‚´ë¶€ì ìœ¼ë¡œ skip ì²˜ë¦¬. ë°°ë„ˆì˜ skippedVersionê³¼ëŠ” ë³„ë„ |

#### 17.12.10 íŒŒì¼ ë³€ê²½ ë²”ìœ„

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `AppDelegate.swift` | `SPUUpdaterDelegate`, `SPUStandardUserDriverDelegate` êµ¬í˜„ ì¶”ê°€. `updaterDelegate`/`userDriverDelegate`ë¥¼ `self`ë¡œ ì„¤ì • |
| `ViewerViewModel.swift` | `availableVersion`, `skippedVersion`, `isUpdateAvailable` í”„ë¡œí¼í‹° ì¶”ê°€. `setUpdateAvailable(version:)`, `dismissUpdateBanner()` ë©”ì„œë“œ ì¶”ê°€ |
| `Views/UpdateBannerView.swift` | **ì‹ ê·œ íŒŒì¼** â€” ì—…ë°ì´íŠ¸ ë°°ë„ˆ SwiftUI View |
| `Views/ViewerWindow.swift` | TabBar ì•„ë˜ì— `UpdateBannerView` ì¡°ê±´ë¶€ ì‚½ì… |
| `Constants.swift` | `Notification.Name.triggerUpdate` ì¶”ê°€ (ë°°ë„ˆ â†’ AppDelegate ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°ìš©) |

#### 17.12.11 í…ŒìŠ¤íŠ¸
- **ë²”ìœ„**: ViewModel ìƒíƒœ ë³€ê²½ í…ŒìŠ¤íŠ¸ë§Œ (Sparkle delegate í†µí•©ì€ ìˆ˜ë™ QA)
- **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:
  - `setUpdateAvailable(version:)` í˜¸ì¶œ ì‹œ `isUpdateAvailable == true`
  - `dismissUpdateBanner()` í˜¸ì¶œ ì‹œ `isUpdateAvailable == false`, `skippedVersion` ì €ì¥ë¨
  - skipí•œ ë²„ì „ê³¼ ê°™ì€ ë²„ì „ìœ¼ë¡œ `setUpdateAvailable` í˜¸ì¶œ ì‹œ `isUpdateAvailable == false`
  - skipí•œ ë²„ì „ë³´ë‹¤ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ `setUpdateAvailable` í˜¸ì¶œ ì‹œ `isUpdateAvailable == true`
  - `availableVersion`ì´ nilì¼ ë•Œ `isUpdateAvailable == false`

---

## 18. Compare ëª¨ë“œ

ë‘ JSONì„ ë‚˜ë€íˆ ë¹„êµí•˜ì—¬ êµ¬ì¡°ì  ì°¨ì´ë¥¼ ì‹œê°í™”í•˜ëŠ” ê¸°ëŠ¥. (v0.3.5~)

### 18.1 ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        CompareToolbar               â”‚  36pt â€” viewMode ì„¸ê·¸ë¨¼íŠ¸ë§Œ (ì¢Œì¸¡ ì •ë ¬)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        CompareInputPanel            â”‚  inputRatio Ã— available (ê¸°ë³¸ 0.3)
â”œâ”€â”€â”€â”€â”€â”€ ë“œë˜ê·¸ ë¶„í• ì„  (9pt) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        CompareResultHeader          â”‚  28pt â€” diff ë°°ì§€ + ì˜µì…˜ + ë³µì‚¬
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      CompareResultPanels (L | R)    â”‚  ë‚˜ë¨¸ì§€ ë†’ì´
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **CompareToolbar**: View Mode ì„¸ê·¸ë¨¼íŠ¸ ì»¨íŠ¸ë¡¤ (Beautify | Tree | Compare)
- **CompareResultHeader**: diff ìš”ì•½ ë°°ì§€ (ì¢Œì¸¡) + ì˜µì…˜ ì²´í¬ë°•ìŠ¤ + Copy Diff (ìš°ì¸¡). identicalì¼ ë•ŒëŠ” ë°°ì§€ ìˆ¨ê¹€
- **CompareResultPanels**: identicalì¼ ë•Œ L|R íŒ¨ë„ ëŒ€ì‹  "No Differences" ì „ì²´ ì˜ì—­ ë·° í‘œì‹œ (ì²´í¬ë§ˆí¬ ì•„ì´ì½˜ + ì•ˆë‚´ í…ìŠ¤íŠ¸)
- ë“œë˜ê·¸ ë¶„í• ì„ : ìµœì†Œ 80pt ê° ì˜ì—­, `NSCursor.resizeUpDown`

### 18.2 ì˜µì…˜ í† ê¸€

ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ (`checkmark.square.fill` / `square` ì•„ì´ì½˜) + `instantRichTooltip` í˜¸ë²„ íˆ´íŒ:

| ì˜µì…˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|--------|------|
| Key Order | ON | ê°ì²´ í‚¤ ìˆœì„œ ë¬´ì‹œ (ë™ì¼ í‚¤ë©´ identical ì·¨ê¸‰) |
| Array Order | OFF | ë°°ì—´ ìš”ì†Œ ìˆœì„œ ë¬´ì‹œ (ë™ì¼ ìš”ì†Œë©´ identical ì·¨ê¸‰) |
| Strict Type | ON | íƒ€ì… ë¶ˆì¼ì¹˜ ì‹œ modified ì·¨ê¸‰ (ì˜ˆ: `"1"` vs `1`) |

### 18.3 Diff ì—”ì§„

- ì¬ê·€ ë¹„êµ: object â†’ í‚¤ ì§‘í•© ì—°ì‚°, array â†’ ordered/unordered ëª¨ë“œ
- Unordered ë°°ì—´: key ìœ ì¶” ë§¤ì¹­ (`id`, `_id`, `uuid`, `key`, `name`) â†’ hash í´ë°±
- ê²°ê³¼: `CompareDiffResult` (added/removed/modified ì¹´ìš´íŠ¸, flattenedDiffItems)
- debounce 0.5ì´ˆ, Background Taskì—ì„œ diff + ë Œë”ë§

### 18.4 ë Œë”ë§ íŒŒì´í”„ë¼ì¸ (CompareDiffRenderer)

6ë‹¨ê³„: formatJSON â†’ assignLineDiffs â†’ buildPairedLines â†’ applyCollapse â†’ truncate (5,000ì¤„) â†’ buildAttributedString

### 18.5 í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

| ë‹¨ì¶•í‚¤ | ë™ì‘ |
|--------|------|
| Cmd+3 | Compare ëª¨ë“œ ì „í™˜ |
| ESC | Compare ëª¨ë“œ ì¢…ë£Œ |

### 18.6 Large JSON

`isLargeJSON == true` ì‹œ: ì…ë ¥ í¸ì§‘ ë¹„í™œì„±í™”, Beautify ë¹„í™œì„±í™” (`.tree` ê°•ì œ), ê²°ê³¼ 5,000ì¤„ ì œí•œ

### 18.7 ìƒì„¸ ë¬¸ì„œ

ìƒì„¸ ë°ì´í„° ëª¨ë¸, ì•Œê³ ë¦¬ì¦˜, ë Œë”ëŸ¬ íŒŒì´í”„ë¼ì¸: `memory/compare-feature.md` ì°¸ì¡°

---

## 19. ì œì™¸ ì‚¬í•­ (Out of Scope)

- History ê¸°ëŠ¥
- JSON í¸ì§‘ ê¸°ëŠ¥ (Input ViewëŠ” raw text í¸ì§‘)
- JSONPath ì¿¼ë¦¬
- Input View syntax highlighting
- ëŒ€ìš©ëŸ‰ JSON ìµœì í™” (ê°€ìƒ ìŠ¤í¬ë¡¤ë§)
- JSONL / JSON5 ì§€ì›
- URL ë§í¬ í´ë¦­
- ì ‘ê·¼ì„± (VoiceOver) ì™„ë²½ ì§€ì›
- ë‹¤êµ­ì–´ ì§€ì›
- ì—¬ëŸ¬ ì°½ ë™ì‹œ ì—´ê¸°
- JSON ìŠ¤í‚¤ë§ˆ ê²€ì¦
- System í…Œë§ˆ (macOS ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì—°ë™)
- íƒ­ ë“œë˜ê·¸ë¡œ ìˆœì„œ ë³€ê²½
- ì‚¬ìš©ì ì •ì˜ íƒ­ íƒ€ì´í‹€

---

## 20. ì„±ê³µ ì§€í‘œ

- í•«í‚¤ ì…ë ¥ â†’ ë·°ì–´ í‘œì‹œ: **< 200ms**
- ìë™ íŒŒì‹± ë°˜ì‘ ì‹œê°„: **300ms** (ë””ë°”ìš´ìŠ¤)
- JSON íŒŒì‹± (1MB ì´í•˜): **< 100ms**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: **< 100MB** (ì¼ë°˜ ì‚¬ìš© ì‹œ)
- ì•± ì‹œì‘ ì‹œê°„: **< 1ì´ˆ**
